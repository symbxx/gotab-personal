import{r as e,I as t,c as a,ap as n,j as s,e as l,D as r,B as i,ao as o,ac as c,O as d,a0 as m,E as f,N as h,aq as u,C as x,H as j}from"./main-CpZfXOxn.js";import{M as y,R as p}from"./myTable-BMu17UVe.js";import{C as _}from"./contentLayout-CCy2UlOC.js";import{R as g}from"./ReloadOutlined-9E68NBHy.js";import"./transformData-BSP_EIFO.js";import"./MoneyCollectOutlined-Bhk0k4M2.js";import"./AlipayOutlined-Dwhx9gLy.js";import"./index-CyetBshh.js";var b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k.apply(this,arguments)}const v=(a,n)=>e.createElement(t,k({},a,{ref:n,icon:b})),S=e.forwardRef(v);function w(){const t=a.c(23),{key:h,refresh:u}=n(),[x,j]=e.useState(!1);let p,b,k,v;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={title:"用户名",key:"username",width:160,fixed:"left",render:H},b={title:"状态",key:"deleted_at",width:80,render:D},k={type:"time",title:"更新时间",key:"updated_at",width:200},t[0]=p,t[1]=b,t[2]=k):(p=t[0],b=t[1],k=t[2]),t[3]!==u?(v=[p,b,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(O,{record:t,refresh:u})}],t[3]=u,t[4]=v):v=t[4];const w=v;let C;t[5]===Symbol.for("react.memo_cache_sentinel")?(C=function(){j(!0);const e=l.getState().user.token;r({url:f.clearDefaultData,token:e}).finally(()=>{j(!1)})},t[5]=C):C=t[5];const N=C;let V,z,M,R,T,L,B,E,K;return t[6]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(g,{}),t[6]=V):V=t[6],t[7]!==u?(z=s.jsx(i,{type:"primary",icon:V,onClick:()=>{u()},children:"刷新列表"}),t[7]=u,t[8]=z):z=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(S,{}),t[9]=M):M=t[9],t[10]!==x?(R=s.jsx(o,{title:"是否确认清理？",onConfirm:N,children:s.jsx(i,{variant:"filled",color:"danger",icon:M,loading:x,children:"清理数据（只保留 10 条）"})}),t[10]=x,t[11]=R):R=t[11],t[12]!==z||t[13]!==R?(T=s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[z,R]}),t[12]=z,t[13]=R,t[14]=T):T=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(c,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),B=s.jsx(m,{className:"my-3"}),t[15]=L,t[16]=B):(L=t[15],B=t[16]),t[17]!==w||t[18]!==h?(E=s.jsx(y,{columns:w,getListUrl:f.getDefaultDataList,dataKey:"data.list",tableKey:h}),t[17]=w,t[18]=h,t[19]=E):E=t[19],t[20]!==E||t[21]!==T?(K=s.jsxs(_,{children:[T,L,B,E]}),t[20]=E,t[21]=T,t[22]=K):K=t[22],K}function D(e){return s.jsx(h,{color:e?"red":"green",children:e?"禁用":"启用"})}function H(e){return s.jsx(h,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(u,{}),children:e||"已注销"})}const O=e.memo(t=>{const n=a.c(33),{record:c,refresh:d}=t;let m;n[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],n[0]=m):m=n[0];const[h,u]=e.useState(m);let y;n[1]!==c.id||n[2]!==d?(y=function(){x(0,u);const e=l.getState().user.token;setTimeout(()=>{r({url:f.enableDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{j(0,u)})},500)},n[1]=c.id,n[2]=d,n[3]=y):y=n[3];const _=y;let g;n[4]!==c.id||n[5]!==d?(g=function(){x(0,u);const e=l.getState().user.token;setTimeout(()=>{r({url:f.disableDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{j(0,u)})},500)},n[4]=c.id,n[5]=d,n[6]=g):g=n[6];const b=g;let k;n[7]!==c.id||n[8]!==d?(k=function(){x(1,u);const e=l.getState().user.token;setTimeout(()=>{r({url:f.deleteDefaultData,token:e,data:{id:c.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{j(1,u)})},500)},n[7]=c.id,n[8]=d,n[9]=k):k=n[9];const v=k,S=c.deleted_at?"是否确认恢复？":"是否确认禁用？",w=c.deleted_at?_:b;let D,H,O,C,N,V,z,M,R;return n[10]===Symbol.for("react.memo_cache_sentinel")?(D={width:"44px"},n[10]=D):D=n[10],n[11]!==h[0]||n[12]!==c.deleted_at?(H=h[0]?s.jsx(p,{}):c.deleted_at?"恢复":"禁用",n[11]=h[0],n[12]=c.deleted_at,n[13]=H):H=n[13],n[14]!==h[0]||n[15]!==H?(O=s.jsx(i,{type:"link",size:"small",disabled:h[0],style:D,children:H}),n[14]=h[0],n[15]=H,n[16]=O):O=n[16],n[17]!==S||n[18]!==w||n[19]!==O?(C=s.jsx(o,{title:S,onConfirm:w,children:O}),n[17]=S,n[18]=w,n[19]=O,n[20]=C):C=n[20],n[21]===Symbol.for("react.memo_cache_sentinel")?(N={width:"44px"},n[21]=N):N=n[21],n[22]!==h[1]?(V=h[1]?s.jsx(p,{}):"删除",n[22]=h[1],n[23]=V):V=n[23],n[24]!==h[1]||n[25]!==V?(z=s.jsx(i,{danger:!0,type:"link",size:"small",disabled:h[1],style:N,children:V}),n[24]=h[1],n[25]=V,n[26]=z):z=n[26],n[27]!==v||n[28]!==z?(M=s.jsx(o,{title:"是否确认删除？",onConfirm:v,children:z}),n[27]=v,n[28]=z,n[29]=M):M=n[29],n[30]!==M||n[31]!==C?(R=s.jsxs("div",{className:"flex flex-wrap",children:[C,M]}),n[30]=M,n[31]=C,n[32]=R):R=n[32],R});export{w as default};
