import{bR as e,r as o,j as t,ab as l,B as r,bS as a,bT as s,bU as n,bV as c,bW as i,e as d,bX as x,G as m,aI as g,c as h,t as u,bY as b,O as p,aC as f}from"./main-CC7X1UB3.js";import{H as j,a as y}from"./index-CXRTVDI7.js";function v(o){return e({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm7.931 9h-2.764a14.67 14.67 0 0 0-1.792-6.243A8.013 8.013 0 0 1 19.931 11zM12.53 4.027c1.035 1.364 2.427 3.78 2.627 6.973H9.03c.139-2.596.994-5.028 2.451-6.974.172-.01.344-.026.519-.026.179 0 .354.016.53.027zm-3.842.7C7.704 6.618 7.136 8.762 7.03 11H4.069a8.013 8.013 0 0 1 4.619-6.273zM4.069 13h2.974c.136 2.379.665 4.478 1.556 6.23A8.01 8.01 0 0 1 4.069 13zm7.381 6.973C10.049 18.275 9.222 15.896 9.041 13h6.113c-.208 2.773-1.117 5.196-2.603 6.972-.182.012-.364.028-.551.028-.186 0-.367-.016-.55-.027zm4.011-.772c.955-1.794 1.538-3.901 1.691-6.201h2.778a8.005 8.005 0 0 1-4.469 6.201z"},child:[]}]})(o)}function k(o){return e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(o)}const w=e=>{const o=h.c(21),{label:l,value:r,icon:a,color:s,loading:n}=e,{token:i}=u.useToken();let d,x;o[0]!==i.colorBgContainer||o[1]!==i.colorBorderSecondary?(d={background:i.colorBgContainer,borderColor:i.colorBorderSecondary},o[0]=i.colorBgContainer,o[1]=i.colorBorderSecondary,o[2]=d):d=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(x={rows:2},o[3]=x):x=o[3];const m=`p-3 rounded-full ${s} text-white`;let g,b;o[4]!==a||o[5]!==m?(g=t.jsx("div",{className:m,children:a}),o[4]=a,o[5]=m,o[6]=g):g=o[6],o[7]!==l?(b=t.jsx("p",{className:"text-gray-500 text-sm font-semibold",children:l}),o[7]=l,o[8]=b):b=o[8];const p="number"==typeof r?r:r??0;let f,j,y,v;return o[9]!==p?(f=t.jsx("p",{className:"text-xl font-bold h-7",children:p}),o[9]=p,o[10]=f):f=o[10],o[11]!==b||o[12]!==f?(j=t.jsxs("div",{className:"ml-4 flex flex-col gap-1",children:[b,f]}),o[11]=b,o[12]=f,o[13]=j):j=o[13],o[14]!==n||o[15]!==g||o[16]!==j?(y=t.jsxs(c,{title:!1,className:"h-[52px]",paragraph:x,loading:n,children:[g,j]}),o[14]=n,o[15]=g,o[16]=j,o[17]=y):y=o[17],o[18]!==d||o[19]!==y?(v=t.jsx("div",{className:"rounded-lg border p-6 flex items-center",style:d,children:y}),o[18]=d,o[19]=y,o[20]=v):v=o[20],v},B=o.memo(e=>{const o=h.c(34),{item:l}=e,{token:r}=u.useToken();let a;o[0]!==r.colorBgContainer||o[1]!==r.colorBgTextHover||o[2]!==r.colorBorderSecondary?(a={"--hover-bg":r.colorBgTextHover,"--normal-bg":r.colorBgContainer,borderColor:r.colorBorderSecondary,height:"100px"},o[0]=r.colorBgContainer,o[1]=r.colorBgTextHover,o[2]=r.colorBorderSecondary,o[3]=a):a=o[3];const s=a;let n,c,i,d,x,m,g,f,j,y,v,k;return o[4]!==l.link?(n=()=>window.open(l.link,"_blank"),o[4]=l.link,o[5]=n):n=o[5],o[6]!==l.iconBackground?(c={background:l.iconBackground},o[6]=l.iconBackground,o[7]=c):c=o[7],o[8]!==l.icon?(i=b(l.icon),o[8]=l.icon,o[9]=i):i=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(d={width:"100%"},o[10]=d):d=o[10],o[11]!==i?(x=t.jsx("img",{src:i,style:d,onError:N}),o[11]=i,o[12]=x):x=o[12],o[13]!==c||o[14]!==x?(m=t.jsx("div",{className:"w-16 h-16 ml-3 transition-main rounded-2xl overflow-visible flex-center hover:scale-110",style:c,children:x}),o[13]=c,o[14]=x,o[15]=m):m=o[15],o[16]!==l.tagColor||o[17]!==l.tagText?(g=l?.tagText&&t.jsx(p,{color:l?.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.8},children:l?.tagText}),o[16]=l.tagColor,o[17]=l.tagText,o[18]=g):g=o[18],o[19]!==l.title?(f=t.jsx("p",{className:"text-base font-semibold line-clamp-1",children:l.title}),o[19]=l.title,o[20]=f):f=o[20],o[21]!==g||o[22]!==f?(j=t.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[g,f]}),o[21]=g,o[22]=f,o[23]=j):j=o[23],o[24]!==l.description?(y=t.jsx("p",{className:"text-gray-500 line-clamp-2 font-medium",children:l.description}),o[24]=l.description,o[25]=y):y=o[25],o[26]!==j||o[27]!==y?(v=t.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[j,y]}),o[26]=j,o[27]=y,o[28]=v):v=o[28],o[29]!==s||o[30]!==v||o[31]!==n||o[32]!==m?(k=t.jsxs("div",{style:s,className:"antd-bg cursor-pointer rounded-lg p-3 border transition-main flex items-center gap-x-6",onClick:n,children:[m,v]}),o[29]=s,o[30]=v,o[31]=n,o[32]=m,o[33]=k):k=o[33],k},(e,o)=>f(e,o));function C(){const[e,h]=o.useState(null),[u,b]=o.useState(!0),[p,f]=o.useState(null),[C,N]=o.useState(!0),S=[{icon:"https://www.rainyun.com/img/logo.d193755d.png",link:i,title:"高性价比云服务器",description:"雨云成立于2018年，是具有自主知识产权的国产云计算服务提供商。雨云为广大用户提供简单易用、便宜实惠、可信赖的云产品。"}];o.useLayoutEffect(()=>{l({url:z+"api/recommendApp",catchMsg:!1}).then(e=>{e?.data&&f(e.data)}).finally(()=>{N(!1)}),function(){const e=d.getState().user.token;l({url:m.getDashboardStats,token:e}).then(e=>{h(e.data),b(!1)}).catch(e=>{b(!1),console.error(e)})}()},[]);const T=[{label:"总用户数",value:e?.total_users,icon:t.jsx(j,{size:24}),color:"bg-blue-500"},{label:"今日新增用户",value:e?.new_users_today,icon:t.jsx(y,{size:24}),color:"bg-green-500"},{label:"网站总数",value:e?.total_websites,icon:t.jsx(v,{size:24}),color:"bg-purple-500"},{label:"用户分享页",value:e?.total_user_shares,icon:t.jsx(k,{size:24}),color:"bg-yellow-500"}],z="https://web.gotab.cn".endsWith("/")?"https://web.gotab.cn":"https://web.gotab.cn/";return t.jsxs("main",{className:"p-3 overflow-scroll",children:[t.jsxs("div",{className:"flex mb-3 ml-1 justify-between items-center",children:[t.jsx("h1",{className:"text-lg font-bold",children:"数据概览"}),t.jsx(r,{icon:t.jsx(a,{}),onClick:function(){const e=d.getState().user.token;x({url:m.exportConfigToml,token:e,responseType:"blob"}).then(e=>{g.saveAs(e.data,"config.toml")})},children:"导出配置文件"})]}),t.jsx(s,{gutter:[12,12],children:T.map((e,o)=>t.jsx(n,{xs:{flex:"100%"},md:{flex:"50%"},lg:{flex:"50%"},xl:{flex:"25%"},children:t.jsx(w,{...e,loading:u})},o))}),t.jsx("h1",{className:"text-lg font-bold my-3 ml-1",children:"🔥 每日宝藏"}),t.jsx("div",{className:"flex flex-col w-full gap-3",children:t.jsx(c,{loading:C||u,className:"p-3",children:p?.length>0?p?.map((e,o)=>t.jsx(B,{item:e},o)):S.map((e,o)=>t.jsx(B,{item:e},o))})})]})}function N(e){e.currentTarget.src="/icons/default_image.svg"}export{C as default};
