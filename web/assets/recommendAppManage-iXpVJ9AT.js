import{c as e,ap as t,F as s,r,j as l,x as i,ax as n,B as a,ay as o,a1 as c,ar as d,as as m,aA as h,G as x,O as f,aB as u,aq as j,D as p,e as y,E as g,J as k,ao as w}from"./main-BrrS_iHi.js";import{r as _}from"./transformData-8_cBD9Is.js";import{M as b,R as S}from"./myTable-DVyyoaQM.js";import{C}from"./contentLayout-CMzUv_NA.js";import{R as A}from"./SortAscendingOutlined-CcaJ4LK5.js";import"./LoadingOutlined-D7v4lkJd.js";import"./MoneyCollectOutlined-BpeIiBeP.js";import"./AlipayOutlined-BNjwg1Te.js";function N(){const f=e.c(47),{key:u,refresh:j}=t(),[p]=s.useForm();let y;f[0]===Symbol.for("react.memo_cache_sentinel")?(y={},f[0]=y):y=f[0];const[g,k]=r.useState(y);let w,S,A,N,M,z,B,D,K,q;f[1]===Symbol.for("react.memo_cache_sentinel")?(w={title:"应用标题",key:"title",width:160,fixed:"left"},S={title:"状态",key:"status",width:120,render:T},A={title:"排序",key:"sort",width:80,render:R},N={title:"应用描述",key:"description",width:460},M={title:"图标",key:"icon",width:100,render:O},z={title:"链接",key:"link",width:120,render:I},B={title:"标签",width:120,render:F},D={title:"推荐人",key:"username",width:160,render:v},K={type:"time",title:"推荐时间",key:"createdTime",width:200},f[1]=w,f[2]=S,f[3]=A,f[4]=N,f[5]=M,f[6]=z,f[7]=B,f[8]=D,f[9]=K):(w=f[1],S=f[2],A=f[3],N=f[4],M=f[5],z=f[6],B=f[7],D=f[8],K=f[9]),f[10]!==j?(q=[w,S,A,N,M,z,B,D,K,{title:"操作",fixed:"right",width:120,render:(e,t)=>l.jsx(L,{record:t,refresh:j})}],f[10]=j,f[11]=q):q=f[11];const E=q;let G,J,P,U,V,Y,$,H,Q,W,X,Z,ee,te,se,re,le;return f[12]!==p?(G=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,k(_(e))},f[12]=p,f[13]=G):G=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(J={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},f[14]=J):J=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(P=l.jsx(s.Item,{name:"title",children:l.jsx(i,{placeholder:"标题"})}),f[15]=P):P=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(U=l.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:J,children:[P,l.jsx(s.Item,{name:"link",children:l.jsx(i,{placeholder:"链接"})})]}),f[16]=U):U=f[16],f[17]!==p?(V=()=>{p.submit()},f[17]=p,f[18]=V):V=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?(Y=l.jsx(n,{}),f[19]=Y):Y=f[19],f[20]!==V?($=l.jsx(a,{type:"primary",onClick:V,icon:Y,children:"查询"}),f[20]=V,f[21]=$):$=f[21],f[22]!==p?(H=()=>{p.resetFields();const e={};e[Math.random()]=!0,k(e)},f[22]=p,f[23]=H):H=f[23],f[24]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(o,{}),f[24]=Q):Q=f[24],f[25]!==H?(W=l.jsx(a,{onClick:H,icon:Q,children:"重置"}),f[25]=H,f[26]=W):W=f[26],f[27]!==$||f[28]!==W?(X=l.jsxs("div",{className:"flex flex-wrap gap-3",children:[$,W]}),f[27]=$,f[28]=W,f[29]=X):X=f[29],f[30]!==p||f[31]!==G||f[32]!==X?(Z=l.jsxs(s,{className:"w-full",form:p,onFinish:G,children:[U,X]}),f[30]=p,f[31]=G,f[32]=X,f[33]=Z):Z=f[33],f[34]===Symbol.for("react.memo_cache_sentinel")?(ee=l.jsx(c,{className:"my-3"}),f[34]=ee):ee=f[34],f[35]!==j?(te=l.jsx("div",{className:"mb-3",children:l.jsx(a,{type:"primary",onClick:()=>{d.show(m,{title:"新增推荐",children:l.jsx(h,{refresh:j})})},children:"新增推荐"})}),f[35]=j,f[36]=te):te=f[36],f[37]!==g?(se={searchParams:g},f[37]=g,f[38]=se):se=f[38],f[39]!==E||f[40]!==u||f[41]!==se?(re=l.jsx(b,{columns:E,getListUrl:x.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:u,params:se}),f[39]=E,f[40]=u,f[41]=se,f[42]=re):re=f[42],f[43]!==Z||f[44]!==te||f[45]!==re?(le=l.jsxs(C,{children:[Z,ee,te,re]}),f[43]=Z,f[44]=te,f[45]=re,f[46]=le):le=f[46],le}function v(e){return l.jsx(f,{color:e?"geekblue":"red",bordered:!1,icon:l.jsx(j,{}),children:e||"已注销"})}function F(e,t){return l.jsx(f,{color:t.tagColor,children:t.tagText||"-"})}function I(e){return l.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function O(e,t){return e?l.jsx(u,{src:e,width:"auto",height:32,className:"p-1 rounded-lg",style:{backgroundColor:t.iconBackground},fallback:"/icons/default_image.svg",preview:{maskClassName:"rounded-lg"}}):"-"}function R(e){return l.jsx(f,{color:"gold",icon:l.jsx(A,{}),children:e||"-"})}function T(e){return l.jsx(f,{color:0===e?"blue":1===e?"green":"red",children:0===e?"待审核":1===e?"正常":"被驳回"})}const L=r.memo(t=>{const s=e.c(26),{record:i,refresh:n}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,h]=r.useState(o);let f;s[1]!==i||s[2]!==n?(f=function(){p(1,h);const e=y.getState().user.token;setTimeout(()=>{g({url:x.deleteRecommendApp,token:e,data:{id:i.id}}).then(e=>{200===e?.code&&n()}).finally(()=>{k(1,h)})},500)},s[1]=i,s[2]=n,s[3]=f):f=s[3];const u=f;let j,_,b,C,A,N,v,F,I;return s[4]===Symbol.for("react.memo_cache_sentinel")?(j={width:"44px"},s[4]=j):j=s[4],s[5]!==i||s[6]!==n?(_=()=>{d.show(m,{title:"编辑推荐",children:l.jsx(M,{editItem:i,refresh:n})})},s[5]=i,s[6]=n,s[7]=_):_=s[7],s[8]!==c[0]?(b=c[0]?l.jsx(S,{}):"编辑",s[8]=c[0],s[9]=b):b=s[9],s[10]!==c[0]||s[11]!==_||s[12]!==b?(C=l.jsx(a,{type:"link",size:"small",disabled:c[0],style:j,onClick:_,children:b}),s[10]=c[0],s[11]=_,s[12]=b,s[13]=C):C=s[13],s[14]===Symbol.for("react.memo_cache_sentinel")?(A={width:"44px"},s[14]=A):A=s[14],s[15]!==c[1]?(N=c[1]?l.jsx(S,{}):"删除",s[15]=c[1],s[16]=N):N=s[16],s[17]!==c[1]||s[18]!==N?(v=l.jsx(a,{danger:!0,type:"link",size:"small",disabled:c[1],style:A,children:N}),s[17]=c[1],s[18]=N,s[19]=v):v=s[19],s[20]!==u||s[21]!==v?(F=l.jsx(w,{title:"是否确认删除该推荐？",onConfirm:u,children:v}),s[20]=u,s[21]=v,s[22]=F):F=s[22],s[23]!==C||s[24]!==F?(I=l.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),s[23]=C,s[24]=F,s[25]=I):I=s[25],I}),M=t=>{const s=e.c(3),{editItem:r,refresh:i}=t;let n;return s[0]!==r||s[1]!==i?(n=l.jsx(l.Fragment,{children:l.jsx(h,{editItem:r,refresh:i,type:"edit"})}),s[0]=r,s[1]=i,s[2]=n):n=s[2],n};export{N as default};
