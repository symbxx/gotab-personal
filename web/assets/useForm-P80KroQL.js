import{em as t,r as e,en as n}from"./requestIdleCallbackPolyfill-BD5NPSQj.js";const o=t=>"object"==typeof t&&null!=t&&1===t.nodeType,r=(t,e)=>(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t,l=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return r(n.overflowY,e)||r(n.overflowX,e)||(t=>{const e=(t=>{if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(e){return null}})(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)})(t)}return!1},i=(t,e,n,o,r,l,i,s)=>l<t&&i>e||l>t&&i<e?0:l<=t&&s<=n||i>=e&&s>=n?l-t-o:i>e&&s<n||l<t&&s>n?i-e+r:0,s=t=>{const e=t.parentElement;return null==e?t.getRootNode().host||null:e},c=(t,e)=>{var n,r,c,a;if("undefined"==typeof document)return[];const{scrollMode:d,block:u,inline:f,boundary:h,skipOverflowHiddenElements:p}=e,g="function"==typeof h?h:t=>t!==h;if(!o(t))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,b=[];let v=t;for(;o(v)&&g(v);){if(v=s(v),v===m){b.push(v);break}null!=v&&v===document.body&&l(v)&&!l(document.documentElement)||null!=v&&l(v,p)&&b.push(v)}const w=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,y=null!=(a=null==(c=window.visualViewport)?void 0:c.height)?a:innerHeight,{scrollX:M,scrollY:W}=window,{height:O,width:j,top:F,right:H,bottom:I,left:_}=t.getBoundingClientRect(),{top:E,right:N,bottom:R,left:T}=(t=>{const e=window.getComputedStyle(t);return{top:parseFloat(e.scrollMarginTop)||0,right:parseFloat(e.scrollMarginRight)||0,bottom:parseFloat(e.scrollMarginBottom)||0,left:parseFloat(e.scrollMarginLeft)||0}})(t);let k="start"===u||"nearest"===u?F-E:"end"===u?I+R:F+O/2-E+R,C="center"===f?_+j/2-T+N:"end"===f?H+N:_-T;const x=[];for(let o=0;o<b.length;o++){const t=b[o],{height:e,width:n,top:r,right:l,bottom:s,left:c}=t.getBoundingClientRect();if("if-needed"===d&&F>=0&&_>=0&&I<=y&&H<=w&&F>=r&&I<=s&&_>=c&&H<=l)return x;const a=getComputedStyle(t),h=parseInt(a.borderLeftWidth,10),p=parseInt(a.borderTopWidth,10),g=parseInt(a.borderRightWidth,10),v=parseInt(a.borderBottomWidth,10);let E=0,N=0;const R="offsetWidth"in t?t.offsetWidth-t.clientWidth-h-g:0,T="offsetHeight"in t?t.offsetHeight-t.clientHeight-p-v:0,S="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,B="offsetHeight"in t?0===t.offsetHeight?0:e/t.offsetHeight:0;if(m===t)E="start"===u?k:"end"===u?k-y:"nearest"===u?i(W,W+y,y,p,v,W+k,W+k+O,O):k-y/2,N="start"===f?C:"center"===f?C-w/2:"end"===f?C-w:i(M,M+w,w,h,g,M+C,M+C+j,j),E=Math.max(0,E+W),N=Math.max(0,N+M);else{E="start"===u?k-r-p:"end"===u?k-s+v+T:"nearest"===u?i(r,s,e,p,v+T,k,k+O,O):k-(r+e/2)+T/2,N="start"===f?C-c-h:"center"===f?C-(c+n/2)+R/2:"end"===f?C-l+g+R:i(c,l,n,h,g+R,C,C+j,j);const{scrollLeft:o,scrollTop:a}=t;E=0===B?0:Math.max(0,Math.min(a+E/B,t.scrollHeight-e/B+T)),N=0===S?0:Math.max(0,Math.min(o+N/S,t.scrollWidth-n/S+R)),k+=a-E,C+=o-N}x.push({el:t,top:E,left:N})}return x};function a(t,e){if(!t.isConnected||!(t=>{let e=t;for(;e&&e.parentNode;){if(e.parentNode===document)return!0;e=e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}return!1})(t))return;const n=(t=>{const e=window.getComputedStyle(t);return{top:parseFloat(e.scrollMarginTop)||0,right:parseFloat(e.scrollMarginRight)||0,bottom:parseFloat(e.scrollMarginBottom)||0,left:parseFloat(e.scrollMarginLeft)||0}})(t);if("object"==typeof(o=e)&&"function"==typeof o.behavior)return e.behavior(c(t,e));var o;const r="boolean"==typeof e||null==e?void 0:e.behavior;for(const{el:l,top:i,left:s}of c(t,(t=>{return!1===t?{block:"end",inline:"nearest"}:(e=t)===Object(e)&&0!==Object.keys(e).length?t:{block:"start",inline:"nearest"};var e})(e))){const t=i-n.top+n.bottom,e=s-n.left+n.right;l.scroll({top:t,left:e,behavior:r})}}const d=["parentNode"];function u(t){return void 0===t||!1===t?[]:Array.isArray(t)?t:[t]}function f(t,e){if(!t.length)return;const n=t.join("_");if(e)return`${e}_${n}`;return d.includes(n)?`form_item_${n}`:n}function h(t,e,n,o,r,l){let i=o;return void 0!==l?i=l:n.validating?i="validating":t.length?i="error":e.length?i="warning":(n.touched||r&&n.validated)&&(i="success"),i}function p(t){return u(t).join("_")}function g(t,e){const o=e.getFieldInstance(t),r=n(o);if(r)return r;const l=f(u(t),e.__INTERNAL__.name);return l?document.getElementById(l):void 0}function m(n){const[o]=t(),r=e.useRef({}),l=e.useMemo(()=>null!=n?n:Object.assign(Object.assign({},o),{__INTERNAL__:{itemRef:t=>e=>{const n=p(t);e?r.current[n]=e:delete r.current[n]}},scrollToField:(t,e={})=>{const{focus:n}=e,o=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(e,["focus"]),r=g(t,l);r&&(a(r,Object.assign({scrollMode:"if-needed",block:"nearest"},o)),n&&l.focusField(t))},focusField:t=>{var e,n;const o=l.getFieldInstance(t);"function"==typeof(null==o?void 0:o.focus)?o.focus():null===(n=null===(e=g(t,l))||void 0===e?void 0:e.focus)||void 0===n||n.call(e)},getFieldInstance:t=>{const e=p(t);return r.current[e]}}),[n,o]);return[l]}export{f as a,p as b,h as g,u as t,m as u};
