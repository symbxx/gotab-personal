import{r as e,I as a,fs as t,c as n,ft as l,k as r,j as s,B as o,C as i,D as c,E as m,_ as d,H as u,ac as f,ao as h,u as p,F as x,fu as j,ar as y,as as b,w as g,z as _,G as v,fv as w,U as S,ae as C,i as k,d as P,L as z,fw as N,aC as E,q as I,fx as L,fy as T,fz as O,bP as D,fA as A,fB as F,N as V,a0 as q,f9 as Z,aH as M,az as U,fC as $,ck as H,fD as R,bQ as B,fE as Y,e as G,c3 as K,fF as Q,fG as J,da as W,cs as X,ct as ee,fH as ae,ab as te,a4 as ne,fI as le,fJ as re,fK as se,fL as oe,fM as ie,fN as ce,fO as me,fP as de,ek as ue,fQ as fe,fR as he,fS as pe,fT as xe,fU as je,bd as ye,fV as be}from"./main-CatTdC9c.js";var ge={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_e.apply(this,arguments)}const ve=(t,n)=>e.createElement(a,_e({},t,{ref:n,icon:ge})),we=e.forwardRef(ve);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Se.apply(this,arguments)}const Ce=(n,l)=>e.createElement(a,Se({},n,{ref:l,icon:t})),ke=e.forwardRef(Ce);var Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ze.apply(this,arguments)}const Ne=(t,n)=>e.createElement(a,ze({},t,{ref:n,icon:Pe})),Ee=e.forwardRef(Ne);var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Le.apply(this,arguments)}const Te=(t,n)=>e.createElement(a,Le({},t,{ref:n,icon:Ie})),Oe=e.forwardRef(Te);function De(e){return e.user.token}const Ae=e.memo(function(){const a=n.c(21),{getDefaultData:t}=l();let p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],a[0]=p):p=a[0];const[x,j]=e.useState(p),y=r(De);let b;a[1]!==y?(b=function(){i(0,j),c({url:m.setDefaultData,token:y,data:{data:d()}}).finally(()=>{u(0,j)})},a[1]=y,a[2]=b):b=a[2];const g=b;let _,v,w,S,C,k,P,z,N;return a[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(f,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),a[3]=_):_=a[3],a[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(Ee,{}),a[4]=v):v=a[4],a[5]!==x[0]?(w=s.jsx(o,{type:"primary",icon:v,loading:x[0],children:"保存默认配置"}),a[5]=x[0],a[6]=w):w=a[6],a[7]!==g||a[8]!==w?(S=s.jsx(h,{title:"是否确认保存？",onConfirm:g,children:w}),a[7]=g,a[8]=w,a[9]=S):S=a[9],a[10]!==t?(C=()=>{t(1,j)},a[10]=t,a[11]=C):C=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(ke,{}),a[12]=k):k=a[12],a[13]!==x[1]?(P=s.jsx(o,{loading:x[1],icon:k,children:"获取默认配置"}),a[13]=x[1],a[14]=P):P=a[14],a[15]!==C||a[16]!==P?(z=s.jsx(h,{title:"是否确认获取？",onConfirm:C,children:P}),a[15]=C,a[16]=P,a[17]=z):z=a[17],a[18]!==S||a[19]!==z?(N=s.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,S,z]}),a[18]=S,a[19]=z,a[20]=N):N=a[20],N});function Fe(){y.hide(b)}function Ve(e){return e.user.userInfo}function qe(e){return e.user.token}const Ze=e.memo(function(){const a=n.c(17),t=p(),[l,i]=e.useState(!1),d=r(qe),u=r(Ve);let h;a[0]!==t||a[1]!==d?(h=function(e){i(!0),c({url:m.submitAppellation,token:d,data:e}).then(e=>{200===e?.code&&e.data&&(t(j(e.data)),y.hide(b))}).finally(()=>{i(!1)})},a[0]=t,a[1]=d,a[2]=h):h=a[2];const _=h;let v,w,S,C,k,P,z;return a[3]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(f,{message:s.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),a[3]=v):v=a[3],a[4]!==u?(w=[{validator:(e,a)=>a&&""!==a?a.length>8?Promise.reject("称号名称不能超过8个字符"):a===u.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],a[4]=u,a[5]=w):w=a[5],a[6]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(g,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),a[6]=S):S=a[6],a[7]!==w?(C=s.jsx(x.Item,{label:"称号名称",required:!0,rules:w,name:"appellation",children:S}),a[7]=w,a[8]=C):C=a[8],a[9]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(o,{onClick:Fe,children:"取消"}),a[9]=k):k=a[9],a[10]!==l?(P=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[k,s.jsx(o,{type:"primary",htmlType:"submit",loading:l,children:"提交申请"})]}),a[10]=l,a[11]=P):P=a[11],a[12]!==_||a[13]!==C||a[14]!==P||a[15]!==u?(z=s.jsxs(s.Fragment,{children:[v,s.jsxs(x,{initialValues:u,onFinish:_,children:[C,P]})]}),a[12]=_,a[13]=C,a[14]=P,a[15]=u,a[16]=z):z=a[16],z});function Me(){y.hide(b)}function Ue(){y.hide(b)}function $e(){y.hide(b)}function He(e,a){const t=new FileReader;let n=!1;const l=()=>{n||a(t.result)};t.addEventListener("loadend",l),t.readAsDataURL(e);return()=>{n=!0,t.removeEventListener("loadend",l),t.abort()}}function Re(e){return e.user.userInfo}function Be(e){return e.user.token}const Ye=e.memo(function(){const a=n.c(31),t=p(),l=r(Be),d=r(Re);let f;a[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],a[0]=f):f=a[0];const[h,x]=e.useState(f),[y,b]=e.useState(),[g,k]=e.useState(null),[P,z]=e.useState(null);let N,E;a[1]!==P?(N=()=>()=>{P&&P()},E=[P],a[1]=P,a[2]=N,a[3]=E):(N=a[2],E=a[3]),e.useEffect(N,E);const I=He;let L;a[4]!==t||a[5]!==l?(L=()=>{i(0,x),c({url:m.resetAvatar,token:l}).then(e=>{200===e?.code&&e.data&&(t(j(e.data)),setTimeout($e,0))}).finally(()=>{u(0,x)})},a[4]=t,a[5]=l,a[6]=L):L=a[6];const T=L;let O;a[7]!==t||a[8]!==g||a[9]!==l||a[10]!==d?(O=()=>{g?(i(1,x),c({url:m.uploadAvatar,data:v({file:g}),token:l}).then(e=>{if(200===e?.code&&e.data){const a={...d,avatar:e.data.avatar_url};t(j(a)),setTimeout(Ue,0)}}).finally(()=>{u(1,x)})):_.error("请先选择一个图片")},a[7]=t,a[8]=g,a[9]=l,a[10]=d,a[11]=O):O=a[11];const D=O;let A,F,V,q,Z,M,U,$,H;return a[12]!==P?(A=()=>()=>{P&&P()},F=[P],a[12]=P,a[13]=A,a[14]=F):(A=a[13],F=a[14]),e.useEffect(A,F),a[15]===Symbol.for("react.memo_cache_sentinel")?(V=e=>{if(e.size>512e3)return _.error("头像大小不能超过500KB！"),!1;const a=I(e,a=>{b(a),k(e)});return z(()=>a),!1},a[15]=V):V=a[15],a[16]!==y?(q=s.jsx(w,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:s.jsx(S,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:V,children:y?s.jsx("img",{src:y,alt:"avatar",style:{width:"100%"}}):s.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[s.jsx(C,{}),s.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),a[16]=y,a[17]=q):q=a[17],a[18]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(o,{onClick:Me,children:"取消"}),a[18]=Z):Z=a[18],a[19]!==h[0]||a[20]!==T?(M=s.jsx(o,{loading:h[0],onClick:T,children:"恢复默认"}),a[19]=h[0],a[20]=T,a[21]=M):M=a[21],a[22]!==h[1]||a[23]!==D?(U=s.jsx(o,{type:"primary",onClick:D,loading:h[1],children:"保存头像"}),a[22]=h[1],a[23]=D,a[24]=U):U=a[24],a[25]!==M||a[26]!==U?($=s.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[Z,M,U]}),a[25]=M,a[26]=U,a[27]=$):$=a[27],a[28]!==$||a[29]!==q?(H=s.jsxs(s.Fragment,{children:[q,$]}),a[28]=$,a[29]=q,a[30]=H):H=a[30],H});function Ge(){y.hide(b)}function Ke(e,a){if(!a)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(a)?a.length<6||a.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function Qe(e){200===e?.code&&y.hide(b)}function Je(e){return e.user.token}const We=e.memo(function(){const a=n.c(19),[t]=k();let l;a[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],a[0]=l):l=a[0];const[d,f]=e.useState(l),h=r(Je);let p;a[1]!==h?(p=function(e){i(0,f),c({url:m.changePassword,data:e,token:h}).then(Qe).finally(()=>{u(0,f)})},a[1]=h,a[2]=p):p=a[2];const j=p,y=Ke;let b,_,v,w,S,C,P,z,N;return a[3]===Symbol.for("react.memo_cache_sentinel")?(b={flex:"82px"},a[3]=b):b=a[3],a[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(x.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),a[4]=_):_=a[4],a[5]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(x.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),a[5]=v):v=a[5],a[6]!==t?(w=[{validator(e,a){if(""===a||!a)return Promise.reject(new Error("请再次输入密码"));return a!==t.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],a[6]=t,a[7]=w):w=a[7],a[8]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(g.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),a[8]=S):S=a[8],a[9]!==w?(C=s.jsx(x.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:w,children:S}),a[9]=w,a[10]=C):C=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(o,{onClick:Ge,children:"取消"}),a[11]=P):P=a[11],a[12]!==d[0]?(z=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[P,s.jsx(o,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),a[12]=d[0],a[13]=z):z=a[13],a[14]!==j||a[15]!==t||a[16]!==C||a[17]!==z?(N=s.jsx(s.Fragment,{children:s.jsxs(x,{form:t,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:b,children:[_,v,C,z]})}),a[14]=j,a[15]=t,a[16]=C,a[17]=z,a[18]=N):N=a[18],N});function Xe(){y.hide(b)}function ea(e,a){return a&&a.length>20&&a.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function aa(e){return e.user.userInfo}function ta(e){return e.user.token}const na=e.memo(function(a){const t=n.c(23),{initialValues:l}=a,d=p();let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,_]=e.useState(f),v=r(ta),w=r(aa);let S;t[1]!==d||t[2]!==v||t[3]!==w?(S=function(e){i(0,_),""!==e.birthday&&e.birthday||delete e.birthday,c({url:m.editUserInfo,data:e,token:v}).then(e=>{200===e?.code&&e.data&&(E(e.data,w)||d(j(e.data)),y.hide(b))}).finally(()=>{u(0,_)})},t[1]=d,t[2]=v,t[3]=w,t[4]=S):S=t[4];const C=S;let k,I,L,T,O,D,A,F,V,q,Z;return t[5]!==l.birthday?(k=l.birthday&&P(l.birthday,"YYYY-MM-DD"),t[5]=l.birthday,t[6]=k):k=t[6],t[7]!==l||t[8]!==k?(I={...l,birthday:k},t[7]=l,t[8]=k,t[9]=I):I=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(L={flex:"72px"},t[10]=L):L=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(x.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,a)=>""!==a&&a?/^[a-zA-Z]/.test(a)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(a)?a.length<3||a.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:s.jsx(g,{placeholder:"用户名",allowClear:!0,maxLength:20})}),t[11]=T):T=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(x.Item,{name:"nickname",label:"昵称",rules:[{validator:ea}],children:s.jsx(g,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),t[12]=O):O=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(x.Item,{name:"sex",label:"性别",required:!0,children:s.jsx(z,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),t[13]=D):D=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(x.Item,{name:"phone",label:"手机号",rules:[{validator(e,a){if(""===a||!a)return Promise.resolve();return/^1[3-9]\d{9}$/.test(a)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:s.jsx(g,{placeholder:"手机号",maxLength:11,allowClear:!0})}),t[14]=A):A=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(x.Item,{name:"birthday",label:"生日",children:s.jsx(N,{placeholder:"生日",allowClear:!0})}),t[15]=F):F=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(o,{onClick:Xe,children:"取消"}),t[16]=V):V=t[16],t[17]!==h[0]?(q=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[V,s.jsx(o,{type:"primary",htmlType:"submit",loading:h[0],children:"确定"})]}),t[17]=h[0],t[18]=q):q=t[18],t[19]!==C||t[20]!==q||t[21]!==I?(Z=s.jsx(s.Fragment,{children:s.jsxs(x,{autoComplete:"off",initialValues:I,name:"edit-user-form",onFinish:C,labelCol:L,children:[T,O,D,A,F,q]})}),t[19]=C,t[20]=q,t[21]=I,t[22]=Z):Z=t[22],Z});function la(){y.hide(b)}function ra(e,a){return a?/^\d{1,6}$/.test(a)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function sa(e){return e?.replace(/\D/g,"")}function oa(e){return e.user.userInfo}function ia(e){return e.user.token}const ca=e.memo(function(){const a=n.c(22),t=p(),[l]=k();let d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],a[0]=d):d=a[0];const[f,h]=e.useState(d),v=r(ia),w=r(oa);let S;a[1]!==l?(S=function(){const e=l.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(i(0,h),c({url:m.emailCode,data:{email:e}}).finally(()=>{u(0,h)})):_.error("请输入有效的邮箱地址"):_.error("请输入邮箱")},a[1]=l,a[2]=S):S=a[2];const C=S;let P;a[3]!==t||a[4]!==v||a[5]!==w?(P=function(e){i(1,h),c({url:m.bindEmail,data:e,token:v}).then(e=>{200===e?.code&&e.data&&(E(e.data,w)||t(j(e.data)),y.hide(b))}).finally(()=>{u(1,h)})},a[3]=t,a[4]=v,a[5]=w,a[6]=P):P=a[6];const z=P;let N,I,L,T,O,D,A,F;return a[7]===Symbol.for("react.memo_cache_sentinel")?(N={flex:"72px"},a[7]=N):N=a[7],a[8]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(x.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,a)=>a?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:s.jsx(g,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),a[8]=I):I=a[8],a[9]!==C||a[10]!==f[0]?(L=s.jsxs("div",{className:"flex gap-3 items-end",children:[I,s.jsx(o,{onClick:C,loading:f[0],className:"mb-6",children:"获取验证码"})]}),a[9]=C,a[10]=f[0],a[11]=L):L=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(T=[{validator:ra}],a[12]=T):T=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(x.Item,{name:"emailCode",required:!0,label:"验证码",normalize:sa,rules:T,children:s.jsx(g,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),a[13]=O):O=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(o,{onClick:la,children:"取消"}),a[14]=D):D=a[14],a[15]!==f[1]?(A=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[D,s.jsx(o,{type:"primary",htmlType:"submit",loading:f[1],children:"确定"})]}),a[15]=f[1],a[16]=A):A=a[16],a[17]!==z||a[18]!==l||a[19]!==L||a[20]!==A?(F=s.jsx(s.Fragment,{children:s.jsxs(x,{form:l,onFinish:z,name:"user-email-form",labelCol:N,autoComplete:"off",children:[L,O,A]})}),a[17]=z,a[18]=l,a[19]=L,a[20]=A,a[21]=F):F=a[21],F});function ma(){y.show(b,{title:"注销账户",children:s.jsx(ya,{})})}function da(){y.show(b,{title:"退出登录",children:s.jsx(ja,{})})}function ua(){y.show(b,{title:"修改密码",children:s.jsx(We,{})})}function fa(){_.success("数据合并完成")}function ha(){y.show(b,{title:"头像设置",children:s.jsx(Ye,{})})}function pa(e){return e.user.userInfo}const xa=e.memo(function(){const a=n.c(97),{pullData:t,pushData:i,getDefaultDataClear:c}=l(),m=r(pa);let d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],a[0]=d):d=a[0];const[u,f]=e.useState(d);let p;a[1]!==m.email?(p=function(){y.show(b,{title:`绑定邮箱（原邮箱：${m.email||"无"}）`,children:s.jsx(ca,{})})},a[1]=m.email,a[2]=p):p=a[2];const x=p;let j,g,v,w,S,C,k,P;a[3]!==m.avatar||a[4]!==m.sex?(j=m?.avatar?I(m.avatar):1===m?.sex?L:T,a[3]=m.avatar,a[4]=m.sex,a[5]=j):j=a[5],a[6]!==j?(g=s.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:ha,children:s.jsx(F,{size:72,src:j})}),a[6]=j,a[7]=g):g=a[7],a[8]!==m.appellation||a[9]!==m.appellationStatus?(v=m.appellation&&1===m.appellationStatus?s.jsx(O,{}):s.jsx(D,{}),a[8]=m.appellation,a[9]=m.appellationStatus,a[10]=v):v=a[10],a[11]!==m.appellation||a[12]!==m.appellationStatus||a[13]!==m.userType?(w=m.appellation&&1===m.appellationStatus?"volcano":A.find(e=>e.userType===m.userType)?.color,a[11]=m.appellation,a[12]=m.appellationStatus,a[13]=m.userType,a[14]=w):w=a[14],a[15]!==m.appellation||a[16]!==m.appellationStatus||a[17]!==m.userType?(S=m.appellation&&1===m.appellationStatus?m.appellation:A.find(e=>e.userType===m.userType)?.text,a[15]=m.appellation,a[16]=m.appellationStatus,a[17]=m.userType,a[18]=S):S=a[18],a[19]!==v||a[20]!==w||a[21]!==S?(C=s.jsx(V,{icon:v,className:"m-0 flex items-center gap-1",color:w,children:S}),a[19]=v,a[20]=w,a[21]=S,a[22]=C):C=a[22],a[23]!==g||a[24]!==C?(k=s.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[g,C]}),a[23]=g,a[24]=C,a[25]=k):k=a[25],a[26]===Symbol.for("react.memo_cache_sentinel")?(P={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},a[26]=P):P=a[26];const z=m.username||"-";let N;a[27]!==z?(N={label:"用户名",children:z},a[27]=z,a[28]=N):N=a[28];const E=m.nickname||"-";let G;a[29]!==E?(G={label:"昵称",children:E},a[29]=E,a[30]=G):G=a[30];const K=1===m.sex?"女":"男";let Q,J,W;a[31]!==K?(Q={label:"性别",children:K},a[31]=K,a[32]=Q):Q=a[32],a[33]!==x||a[34]!==m.email?(J=m.email||s.jsx(o,{type:"link",size:"small",className:"p-0",onClick:x,children:"绑定"}),a[33]=x,a[34]=m.email,a[35]=J):J=a[35],a[36]!==J?(W={label:"邮箱",children:J},a[36]=J,a[37]=W):W=a[37];const X=m.phone||"-";let ee;a[38]!==X?(ee={label:"手机号",children:X},a[38]=X,a[39]=ee):ee=a[39];const ae=m.birthday||"-";let te;a[40]!==ae?(te={label:"生日",children:ae},a[40]=ae,a[41]=te):te=a[41];const ne=m.registerTime||"-";let le,re,se,oe,ie,ce,me,de,ue,fe,he,pe,xe;a[42]!==ne?(le={label:"注册时间",children:ne},a[42]=ne,a[43]=le):le=a[43],a[44]!==i?(re=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):i(0,f)},a[44]=i,a[45]=re):re=a[45],a[46]!==u[0]||a[47]!==re?(se=s.jsx(o,{type:"link",size:"small",onClick:re,loading:u[0],children:"上传"}),a[46]=u[0],a[47]=re,a[48]=se):se=a[48],a[49]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(q,{type:"vertical"}),a[49]=oe):oe=a[49],a[50]!==t?(ie=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):t(1,f,void 0,!0)},a[50]=t,a[51]=ie):ie=a[51],a[52]!==u[1]||a[53]!==ie?(ce=s.jsx(o,{type:"link",size:"small",onClick:ie,loading:u[1],children:"拉取"}),a[52]=u[1],a[53]=ie,a[54]=ce):ce=a[54],a[55]!==se||a[56]!==ce?(me={label:"数据管理",children:s.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[se,oe,ce]})},a[55]=se,a[56]=ce,a[57]=me):me=a[57],a[58]!==c?(de=()=>{c(void 0,void 0,fa,!0)},a[58]=c,a[59]=de):de=a[59],a[60]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(o,{type:"link",size:"small",className:"p-0",children:"合并数据"}),a[60]=ue):ue=a[60],a[61]!==de?(fe={label:"初始数据",children:s.jsx(s.Fragment,{children:s.jsx(h,{title:"将与本地数据差异化合并",onConfirm:de,children:ue})})},a[61]=de,a[62]=fe):fe=a[62],a[63]!==N||a[64]!==G||a[65]!==Q||a[66]!==W||a[67]!==ee||a[68]!==te||a[69]!==le||a[70]!==me||a[71]!==fe?(he=s.jsx(Z,{bordered:!0,column:1,className:"w-full mt-6",styles:P,items:[N,G,Q,W,ee,te,le,me,fe]}),a[63]=N,a[64]=G,a[65]=Q,a[66]=W,a[67]=ee,a[68]=te,a[69]=le,a[70]=me,a[71]=fe,a[72]=he):he=a[72],a[73]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(M,{}),a[73]=pe):pe=a[73],a[74]!==m.appellation||a[75]!==m.appellationStatus?(xe=()=>{y.show(b,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[m.appellation&&1===m.appellationStatus?"变更称号":"申请称号",s.jsxs(V,{color:0===m.appellationStatus?"":1===m.appellationStatus?"green":"red",icon:0===m.appellationStatus?s.jsx(U,{}):1===m.appellationStatus?s.jsx($,{}):s.jsx(we,{}),children:["称号状态：",0===m.appellationStatus?m.appellation?"申请中":"待申请":1===m.appellationStatus?"已荣获":"被拒绝"]})]}),children:s.jsx(Ze,{})})},a[74]=m.appellation,a[75]=m.appellationStatus,a[76]=xe):xe=a[76];const je=0===m.appellationStatus?m.appellation?"称号管理":"申请称号":1===m.appellationStatus?"变更称号":"重新申请";let ye,be,ge,_e,ve,Se,Ce,ke,Pe,ze;return a[77]!==xe||a[78]!==je?(ye=s.jsx(o,{icon:pe,onClick:xe,children:je}),a[77]=xe,a[78]=je,a[79]=ye):ye=a[79],a[80]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(H,{}),a[80]=be):be=a[80],a[81]!==m?(ge=s.jsx(o,{icon:be,onClick:()=>{y.show(b,{title:"更新资料",children:s.jsx(na,{initialValues:m})})},children:"更新资料"}),a[81]=m,a[82]=ge):ge=a[82],a[83]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(o,{icon:s.jsx(R,{}),onClick:ua,children:"修改密码"}),a[83]=_e):_e=a[83],a[84]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(B,{}),a[84]=ve):ve=a[84],a[85]!==x?(Se=s.jsx(o,{icon:ve,onClick:x,children:"绑定邮箱"}),a[85]=x,a[86]=Se):Se=a[86],a[87]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx(o,{icon:s.jsx(Y,{}),danger:!0,onClick:da,children:"退出登录"}),a[87]=Ce):Ce=a[87],a[88]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(o,{icon:s.jsx(Oe,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:ma,children:"注销账户？请慎重操作！"}),a[88]=ke):ke=a[88],a[89]!==ye||a[90]!==ge||a[91]!==Se?(Pe=s.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[ye,ge,_e,Se,Ce,ke]}),a[89]=ye,a[90]=ge,a[91]=Se,a[92]=Pe):Pe=a[92],a[93]!==he||a[94]!==Pe||a[95]!==k?(ze=s.jsxs(s.Fragment,{children:[k,he,Pe]}),a[93]=he,a[94]=Pe,a[95]=k,a[96]=ze):ze=a[96],ze}),ja=()=>{const a=n.c(17),t=p(),{getDefaultDataClear:i}=l(),c=r(ba),[d,u]=e.useState(!1);let h;a[0]!==t?(h=function(){t(Q("")),t(j({})),t(J(!1)),y.hide(b),W||(y.hide(X),y.hide(ee))},a[0]=t,a[1]=h):h=a[1];const x=h;let g;a[2]!==d||a[3]!==x||a[4]!==t||a[5]!==i||a[6]!==c?(g=function(){if(x(),te({url:m.logout,token:c}),_.success("退出成功"),d||!W){i(10,void 0,e=>{ne(e)&&(t(le()),t(re()),t(se()),t(oe()),t(ie()),t(ce()),t(me()),t(de()),t(ue()),t(fe()),t(he()),t(pe()),t(xe()),t(je()))});const e=G.getState().stateUtils.mySwiper;if(e){G.getState().swiper.loop?e?.slideToLoop(0):e?.slideTo(0)}}},a[2]=d,a[3]=x,a[4]=t,a[5]=i,a[6]=c,a[7]=g):g=a[7];const v=g;let w,S,C,k,P;return a[8]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(f,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:s.jsx(ae,{}),className:"rounded-md"}),a[8]=w):w=a[8],a[9]!==d?(S=W&&s.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{u(!d)},children:[s.jsx(ye,{checked:d,className:"pointer-events-none"}),s.jsx("p",{children:"退出清空本地数据"})]}),a[9]=d,a[10]=S):S=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(o,{onClick:ga,children:"取消"}),a[11]=C):C=a[11],a[12]!==v?(k=s.jsxs("div",{className:"flex gap-3 justify-end",children:[C,s.jsx(o,{danger:!0,type:"primary",onClick:v,children:"确定"})]}),a[12]=v,a[13]=k):k=a[13],a[14]!==S||a[15]!==k?(P=s.jsxs("div",{className:"flex flex-col gap-4",children:[w,S,k]}),a[14]=S,a[15]=k,a[16]=P):P=a[16],P},ya=()=>{const a=n.c(7),t=p(),[l,r]=e.useState(!1);let i;a[0]!==t?(i=function(){r(!0);const e=G.getState().user.token;K({url:m.logOff,token:e}).then(e=>{200===e?.code&&(t(Q("")),t(j({})),t(J(!1)),y.hide(b),W||(y.hide(X),y.hide(ee)))}).finally(()=>{r(!1)})},a[0]=t,a[1]=i):i=a[1];const c=i;let d,u,h;return a[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(f,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:s.jsx(ae,{}),className:"rounded-md"}),a[2]=d):d=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o,{onClick:_a,children:"取消"}),a[3]=u):u=a[3],a[4]!==l||a[5]!==c?(h=s.jsxs("div",{className:"flex flex-col gap-4",children:[d,s.jsxs("div",{className:"flex gap-3 justify-end",children:[u,s.jsx(o,{danger:!0,type:"primary",onClick:c,loading:l,children:"确定"})]})]}),a[4]=l,a[5]=c,a[6]=h):h=a[6],h};function ba(e){return e.user.token}function ga(){y.hide(b)}function _a(){y.hide(b)}function va(){const a=n.c(11),t=p(),l=r(Ca),o=r(Sa),i=r(wa);let c;a[0]!==t||a[1]!==l||a[2]!==o?(c=function(){te({url:m.getUserInfo,token:l}).then(e=>{200===e?.code&&e.data&&(E(e.data,o)||t(j(e.data)))})},a[0]=t,a[1]=l,a[2]=o,a[3]=c):c=a[3];const d=c;let u,f,h;return a[4]!==d||a[5]!==l?(u=()=>{l&&d()},a[4]=d,a[5]=l,a[6]=u):u=a[6],a[7]===Symbol.for("react.memo_cache_sentinel")?(f=[],a[7]=f):f=a[7],e.useEffect(u,f),a[8]!==i||a[9]!==l?(h=s.jsx("div",{className:"py-6 mx-auto w-full max-w-[390px]",children:l?i?s.jsx(Ae,{}):s.jsx(xa,{}):s.jsx(be,{})}),a[8]=i,a[9]=l,a[10]=h):h=a[10],h}function wa(e){return e.user.isSettingDefaultData}function Sa(e){return e.user.userInfo}function Ca(e){return e.user.token}export{va as default};
