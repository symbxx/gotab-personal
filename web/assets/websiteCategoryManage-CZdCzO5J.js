import{c as e,ap as t,F as s,r as a,j as l,x as r,ax as i,B as n,ay as o,ac as c,Q as m,a1 as d,ar as h,as as x,G as f,O as y,az as j,aa as p,e as u,E as _,D as b,J as g,ao as S}from"./main-DBCALU0b.js";import{r as w}from"./transformData-_VI0jaUu.js";import{M as C,R as k}from"./myTable-Bsgor84R.js";import{C as F}from"./contentLayout-BIZLtLYj.js";import{R as N}from"./SortAscendingOutlined-XHDwUMOF.js";import"./LoadingOutlined-DuYkz5sN.js";import"./MoneyCollectOutlined-DWZamemE.js";import"./AlipayOutlined-BdDYnCVD.js";function v(){const y=e.c(41),{key:j,refresh:p}=t(),[u]=s.useForm();let _;y[0]===Symbol.for("react.memo_cache_sentinel")?(_={},y[0]=_):_=y[0];const[b,g]=a.useState(_);let S,k,N,v;y[1]===Symbol.for("react.memo_cache_sentinel")?(S={title:"分类名称",key:"name",width:160,fixed:"left"},k={title:"排序",key:"sort",width:80,render:I},N={title:"更新时间",key:"updatedTime",width:200,render:T},y[1]=S,y[2]=k,y[3]=N):(S=y[1],k=y[2],N=y[3]),y[4]!==p?(v=[S,k,N,{title:"操作",fixed:"right",width:120,render:(e,t)=>l.jsx(L,{record:t,refresh:p})}],y[4]=p,y[5]=v):v=y[5];const M=v;let W,z,A,R,q,D,K,V,B,E,G,J,P,Q,U,Y,$;return y[6]!==u?(W=()=>{const e=u.getFieldsValue();e[Math.random()]=!0,g(w(e))},y[6]=u,y[7]=W):W=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(z={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},y[8]=z):z=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(A=l.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:z,children:l.jsx(s.Item,{name:"name",children:l.jsx(r,{placeholder:"分类名称"})})}),y[9]=A):A=y[9],y[10]!==u?(R=()=>{u.submit()},y[10]=u,y[11]=R):R=y[11],y[12]===Symbol.for("react.memo_cache_sentinel")?(q=l.jsx(i,{}),y[12]=q):q=y[12],y[13]!==R?(D=l.jsx(n,{type:"primary",onClick:R,icon:q,children:"查询"}),y[13]=R,y[14]=D):D=y[14],y[15]!==u?(K=()=>{u.resetFields();const e={};e[Math.random()]=!0,g(e)},y[15]=u,y[16]=K):K=y[16],y[17]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsx(o,{}),y[17]=V):V=y[17],y[18]!==K?(B=l.jsx(n,{onClick:K,icon:V,children:"重置"}),y[18]=K,y[19]=B):B=y[19],y[20]!==D||y[21]!==B?(E=l.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,B]}),y[20]=D,y[21]=B,y[22]=E):E=y[22],y[23]!==u||y[24]!==E||y[25]!==W?(G=l.jsxs(s,{className:"w-full",form:u,onFinish:W,children:[A,E]}),y[23]=u,y[24]=E,y[25]=W,y[26]=G):G=y[26],y[27]===Symbol.for("react.memo_cache_sentinel")?(J=l.jsx(c,{type:"warning",description:l.jsxs(l.Fragment,{children:[l.jsx(m,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),P=l.jsx(d,{className:"my-3"}),y[27]=J,y[28]=P):(J=y[27],P=y[28]),y[29]!==p?(Q=l.jsx("div",{className:"mb-3",children:l.jsx(n,{type:"primary",onClick:()=>{h.show(x,{title:"新增分类",children:l.jsx(O,{refresh:p,type:"add"})})},children:"新增分类"})}),y[29]=p,y[30]=Q):Q=y[30],y[31]!==b?(U={searchParams:b},y[31]=b,y[32]=U):U=y[32],y[33]!==M||y[34]!==j||y[35]!==U?(Y=l.jsx(C,{columns:M,getListUrl:f.getWebsiteCategoryList,dataKey:"data.list",tableKey:j,params:U}),y[33]=M,y[34]=j,y[35]=U,y[36]=Y):Y=y[36],y[37]!==G||y[38]!==Q||y[39]!==Y?($=l.jsxs(F,{children:[G,J,P,Q,Y]}),y[37]=G,y[38]=Q,y[39]=Y,y[40]=$):$=y[40],$}function T(e,t){return l.jsx(y,{icon:l.jsx(j,{}),children:e||t.createdTime})}function I(e){return l.jsx(y,{color:"gold",icon:l.jsx(N,{}),children:e||"-"})}const O=t=>{const i=e.c(16),{editItem:o,refresh:c,type:m}=t,d=void 0===m?"add":m,[y]=s.useForm(),[j,b]=a.useState(!1);let g;i[0]!==o||i[1]!==c||i[2]!==d?(g=function(e){b(!0);const t=u.getState().user.token;_({url:"add"===d?f.addWebsiteCategory:f.editWebsiteCategory,token:t,data:"add"===d?e:{...e,id:o.id}}).then(e=>{200===e?.code&&(h.hide(x),c&&c())}).finally(()=>{b(!1)})},i[0]=o,i[1]=c,i[2]=d,i[3]=g):g=i[3];const S=g;let w,C,k,F;i[4]===Symbol.for("react.memo_cache_sentinel")?(w={flex:"82px"},i[4]=w):w=i[4],i[5]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx(s.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:l.jsx(r,{placeholder:"分类名称",allowClear:!0})}),i[5]=C):C=i[5],i[6]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx(s.Item,{name:"sort",label:"排序",children:l.jsx(p,{placeholder:"排序"})}),i[6]=k):k=i[6],i[7]===Symbol.for("react.memo_cache_sentinel")?(F=l.jsx(n,{onClick:M,children:"取消"}),i[7]=F):F=i[7];const N="add"===d?"新增分类":"保存编辑";let v,T;return i[8]!==j||i[9]!==N?(v=l.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[F,l.jsx(n,{type:"primary",htmlType:"submit",loading:j,children:N})]}),i[8]=j,i[9]=N,i[10]=v):v=i[10],i[11]!==o||i[12]!==y||i[13]!==S||i[14]!==v?(T=l.jsx(l.Fragment,{children:l.jsxs(s,{form:y,autoComplete:"off",variant:"filled",initialValues:o,labelCol:w,onFinish:S,children:[C,k,v]})}),i[11]=o,i[12]=y,i[13]=S,i[14]=v,i[15]=T):T=i[15],T},L=a.memo(t=>{const s=e.c(20),{record:r,refresh:i}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,m]=a.useState(o);let d;s[1]!==r||s[2]!==i?(d=function(){b(1,m);const e=u.getState().user.token;setTimeout(()=>{_({url:f.deleteWebsiteCategory,token:e,data:{id:r.id}}).then(e=>{200===e?.code&&i()}).finally(()=>{g(1,m)})},500)},s[1]=r,s[2]=i,s[3]=d):d=s[3];const y=d;let j,p,w,C,F,N,v;return s[4]===Symbol.for("react.memo_cache_sentinel")?(j={width:"44px"},s[4]=j):j=s[4],s[5]!==r||s[6]!==i?(p=l.jsx(n,{type:"link",size:"small",style:j,onClick:()=>{h.show(x,{title:"编辑分类",children:l.jsx(O,{editItem:r,refresh:i,type:"edit"})})},children:"编辑"}),s[5]=r,s[6]=i,s[7]=p):p=s[7],s[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},s[8]=w):w=s[8],s[9]!==c[1]?(C=c[1]?l.jsx(k,{}):"删除",s[9]=c[1],s[10]=C):C=s[10],s[11]!==c[1]||s[12]!==C?(F=l.jsx(n,{danger:!0,type:"link",size:"small",disabled:c[1],style:w,children:C}),s[11]=c[1],s[12]=C,s[13]=F):F=s[13],s[14]!==y||s[15]!==F?(N=l.jsx(S,{title:"是否确认删除？",onConfirm:y,children:F}),s[14]=y,s[15]=F,s[16]=N):N=s[16],s[17]!==p||s[18]!==N?(v=l.jsxs("div",{className:"flex flex-wrap",children:[p,N]}),s[17]=p,s[18]=N,s[19]=v):v=s[19],v});function M(){h.hide(x)}export{v as default};
