import{g as e,r as t,I as a,c as n,ap as l,j as s,e as r,E as o,B as i,ao as c,ac as d,Q as m,a1 as f,G as u,O as h,aq as j,D as x,J as y}from"./main-BWFVfKBs.js";import{M as p,R as _}from"./myTable-D6MomsZL.js";import{C as g}from"./contentLayout-o4Tti_5G.js";import{R as b}from"./ReloadOutlined-fbbq8ciB.js";import"./LoadingOutlined-DvaII4VX.js";import"./transformData-CqMHN4sN.js";import"./MoneyCollectOutlined-BZIpqQw7.js";import"./AlipayOutlined-CqTS0V2z.js";import"./ReloadOutlined-CKAsJBSV.js";var k,v={};function S(){if(k)return v;k=1,Object.defineProperty(v,"__esModule",{value:!0});return v.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},v}const w=e(S());function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},D.apply(this,arguments)}const O=(e,n)=>t.createElement(a,D({},e,{ref:n,icon:w})),H=t.forwardRef(O);function C(){const e=n.c(23),{key:a,refresh:h}=l(),[j,x]=t.useState(!1);let y,_,k,v;e[0]===Symbol.for("react.memo_cache_sentinel")?(y={title:"用户名",key:"username",width:160,fixed:"left",render:z},_={title:"状态",key:"deleted_at",width:80,render:V},k={type:"time",title:"更新时间",key:"updated_at",width:200},e[0]=y,e[1]=_,e[2]=k):(y=e[0],_=e[1],k=e[2]),e[3]!==h?(v=[y,_,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(M,{record:t,refresh:h})}],e[3]=h,e[4]=v):v=e[4];const S=v;let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w=function(){x(!0);const e=r.getState().user.token;o({url:u.clearDefaultData,token:e}).finally(()=>{x(!1)})},e[5]=w):w=e[5];const D=w;let O,C,N,R,L,T,B,E,K;return e[6]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(b,{}),e[6]=O):O=e[6],e[7]!==h?(C=s.jsx(i,{type:"primary",icon:O,onClick:()=>{h()},children:"刷新列表"}),e[7]=h,e[8]=C):C=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(H,{}),e[9]=N):N=e[9],e[10]!==j?(R=s.jsx(c,{title:"是否确认清理？",onConfirm:D,children:s.jsx(i,{variant:"filled",color:"danger",icon:N,loading:j,children:"清理数据（只保留 10 条）"})}),e[10]=j,e[11]=R):R=e[11],e[12]!==C||e[13]!==R?(L=s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[C,R]}),e[12]=C,e[13]=R,e[14]=L):L=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(d,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),B=s.jsx(f,{className:"my-3"}),e[15]=T,e[16]=B):(T=e[15],B=e[16]),e[17]!==S||e[18]!==a?(E=s.jsx(p,{columns:S,getListUrl:u.getDefaultDataList,dataKey:"data.list",tableKey:a}),e[17]=S,e[18]=a,e[19]=E):E=e[19],e[20]!==E||e[21]!==L?(K=s.jsxs(g,{children:[L,T,B,E]}),e[20]=E,e[21]=L,e[22]=K):K=e[22],K}function V(e){return s.jsx(h,{color:e?"red":"green",children:e?"禁用":"启用"})}function z(e){return s.jsx(h,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(j,{}),children:e||"已注销"})}const M=t.memo(e=>{const a=n.c(33),{record:l,refresh:d}=e;let m;a[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],a[0]=m):m=a[0];const[f,h]=t.useState(m);let j;a[1]!==l.id||a[2]!==d?(j=function(){x(0,h);const e=r.getState().user.token;setTimeout(()=>{o({url:u.enableDefaultData,token:e,data:{id:l.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{y(0,h)})},500)},a[1]=l.id,a[2]=d,a[3]=j):j=a[3];const p=j;let g;a[4]!==l.id||a[5]!==d?(g=function(){x(0,h);const e=r.getState().user.token;setTimeout(()=>{o({url:u.disableDefaultData,token:e,data:{id:l.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{y(0,h)})},500)},a[4]=l.id,a[5]=d,a[6]=g):g=a[6];const b=g;let k;a[7]!==l.id||a[8]!==d?(k=function(){x(1,h);const e=r.getState().user.token;setTimeout(()=>{o({url:u.deleteDefaultData,token:e,data:{id:l.id}}).then(e=>{200===e?.code&&d()}).finally(()=>{y(1,h)})},500)},a[7]=l.id,a[8]=d,a[9]=k):k=a[9];const v=k,S=l.deleted_at?"是否确认恢复？":"是否确认禁用？",w=l.deleted_at?p:b;let D,O,H,C,V,z,M,N,R;return a[10]===Symbol.for("react.memo_cache_sentinel")?(D={width:"44px"},a[10]=D):D=a[10],a[11]!==f[0]||a[12]!==l.deleted_at?(O=f[0]?s.jsx(_,{}):l.deleted_at?"恢复":"禁用",a[11]=f[0],a[12]=l.deleted_at,a[13]=O):O=a[13],a[14]!==f[0]||a[15]!==O?(H=s.jsx(i,{type:"link",size:"small",disabled:f[0],style:D,children:O}),a[14]=f[0],a[15]=O,a[16]=H):H=a[16],a[17]!==S||a[18]!==w||a[19]!==H?(C=s.jsx(c,{title:S,onConfirm:w,children:H}),a[17]=S,a[18]=w,a[19]=H,a[20]=C):C=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(V={width:"44px"},a[21]=V):V=a[21],a[22]!==f[1]?(z=f[1]?s.jsx(_,{}):"删除",a[22]=f[1],a[23]=z):z=a[23],a[24]!==f[1]||a[25]!==z?(M=s.jsx(i,{danger:!0,type:"link",size:"small",disabled:f[1],style:V,children:z}),a[24]=f[1],a[25]=z,a[26]=M):M=a[26],a[27]!==v||a[28]!==M?(N=s.jsx(c,{title:"是否确认删除？",onConfirm:v,children:M}),a[27]=v,a[28]=M,a[29]=N):N=a[29],a[30]!==N||a[31]!==C?(R=s.jsxs("div",{className:"flex flex-wrap",children:[C,N]}),a[30]=N,a[31]=C,a[32]=R):R=a[32],R});export{C as default};
