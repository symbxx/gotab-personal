import{F as e,r as s,j as a,ac as l,n as t,w as n,B as i,ad as r,ae as o,C as c,e as m,ab as d,af as x,H as p,D as f,E as h}from"./main-DdJGrvOf.js";import{C as j}from"./contentLayout-RA1HvZMl.js";function u(){const[u]=e.useForm(),[g,b]=s.useState([]);s.useEffect(()=>{!function(){c(0,b);const e=m.getState().user.token;d({url:h.getBottomLinks,token:e}).then(e=>{if(200===e.code)try{const s=JSON.parse(e.data.bottomLinks);s&&x(s)&&s.length>0&&u.setFieldsValue({links:s})}catch(s){}}).finally(()=>{p(0,b)})}()},[]);return a.jsxs(j,{children:[a.jsx(l,{type:"warning",description:a.jsx(a.Fragment,{children:"⚠️ 用于展示备案号、版权声明等信息，支持增加、删除链接组，如果没有自定义，将显示默认内容"}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),a.jsx(t,{spinning:g[0],wrapperClassName:"w-full",children:a.jsxs(e,{form:u,onFinish:e=>{c(1,b);const s=m.getState().user.token;f({url:h.updateBottomLinks,token:s,data:{links:JSON.stringify(e.links)}}).finally(()=>{p(1,b)})},className:"w-full",autoComplete:"off",labelCol:{flex:"82px"},children:[a.jsx(e.List,{name:"links",children:(s,{add:l,remove:t})=>a.jsxs(a.Fragment,{children:[s.map(({key:s,name:l,...o})=>a.jsxs("div",{className:"flex mb-2 gap-3 items-start align-baseline",children:[a.jsx(e.Item,{label:"链接名称",...o,name:[l,"label"],rules:[{required:!0,message:"请输入链接名称"}],className:"flex-1",children:a.jsx(n,{placeholder:"例如：京ICP备12345678号或Gotab新标签页",allowClear:!0})}),a.jsx(e.Item,{label:"链接地址",...o,name:[l,"link"],rules:[{required:!0,message:"请输入链接地址"},{type:"url",message:"请输入有效的 URL 地址"}],className:"flex-1",children:a.jsx(n,{placeholder:"例如：https://beian.miit.gov.cn或https://web.gotab.cn",allowClear:!0})}),a.jsx(e.Item,{label:"链接图标",...o,name:[l,"icon"],className:"flex-1",children:a.jsx(n,{placeholder:"/images/beian.png",allowClear:!0})}),a.jsx(i,{onClick:()=>{t(l)},type:"text",danger:!0,icon:a.jsx(r,{}),className:"flex-0"})]},s)),a.jsx(e.Item,{children:a.jsx(i,{type:"dashed",onClick:()=>l(),block:!0,icon:a.jsx(o,{}),children:"添加链接"})})]})}),a.jsx(e.Item,{children:a.jsx(i,{type:"primary",htmlType:"submit",children:"提交"})})]})})]})}export{u as default};
