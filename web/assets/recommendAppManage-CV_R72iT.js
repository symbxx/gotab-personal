import{c as e,ap as t,F as s,r,j as l,w as i,ax as n,B as a,ay as o,a0 as c,ar as d,as as m,aA as h,E as x,N as f,aB as u,aq as j,C as p,e as y,D as k,H as g,ao as w}from"./main-KjJepRzY.js";import{r as _}from"./transformData-BlwvbYBw.js";import{M as b,R as S}from"./myTable-xc7ICYsy.js";import{C}from"./contentLayout-qHWurPv1.js";import{R as N}from"./SortAscendingOutlined-CDjEJtP1.js";import"./MoneyCollectOutlined-C8El17dn.js";import"./AlipayOutlined-DJ44V6sX.js";import"./index-DXJ4uJIN.js";function A(){const f=e.c(47),{key:u,refresh:j}=t(),[p]=s.useForm();let y;f[0]===Symbol.for("react.memo_cache_sentinel")?(y={},f[0]=y):y=f[0];const[k,g]=r.useState(y);let w,S,N,A,B,L,O,D,K,q;f[1]===Symbol.for("react.memo_cache_sentinel")?(w={title:"应用标题",key:"title",width:160,fixed:"left"},S={title:"状态",key:"status",width:120,render:M},N={title:"排序",key:"sort",width:80,render:T},A={title:"应用描述",key:"description",width:460},B={title:"图标",key:"icon",width:100,render:R},L={title:"链接",key:"link",width:120,render:I},O={title:"标签",width:120,render:F},D={title:"推荐人",key:"username",width:160,render:v},K={type:"time",title:"推荐时间",key:"createdTime",width:200},f[1]=w,f[2]=S,f[3]=N,f[4]=A,f[5]=B,f[6]=L,f[7]=O,f[8]=D,f[9]=K):(w=f[1],S=f[2],N=f[3],A=f[4],B=f[5],L=f[6],O=f[7],D=f[8],K=f[9]),f[10]!==j?(q=[w,S,N,A,B,L,O,D,K,{title:"操作",fixed:"right",width:120,render:(e,t)=>l.jsx(z,{record:t,refresh:j})}],f[10]=j,f[11]=q):q=f[11];const E=q;let H,P,U,V,Y,$,G,J,Q,W,X,Z,ee,te,se,re,le;return f[12]!==p?(H=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,g(_(e))},f[12]=p,f[13]=H):H=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(P={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},f[14]=P):P=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(U=l.jsx(s.Item,{name:"title",children:l.jsx(i,{placeholder:"标题"})}),f[15]=U):U=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:P,children:[U,l.jsx(s.Item,{name:"link",children:l.jsx(i,{placeholder:"链接"})})]}),f[16]=V):V=f[16],f[17]!==p?(Y=()=>{p.submit()},f[17]=p,f[18]=Y):Y=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?($=l.jsx(n,{}),f[19]=$):$=f[19],f[20]!==Y?(G=l.jsx(a,{type:"primary",onClick:Y,icon:$,children:"查询"}),f[20]=Y,f[21]=G):G=f[21],f[22]!==p?(J=()=>{p.resetFields();const e={};e[Math.random()]=!0,g(e)},f[22]=p,f[23]=J):J=f[23],f[24]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(o,{}),f[24]=Q):Q=f[24],f[25]!==J?(W=l.jsx(a,{onClick:J,icon:Q,children:"重置"}),f[25]=J,f[26]=W):W=f[26],f[27]!==G||f[28]!==W?(X=l.jsxs("div",{className:"flex flex-wrap gap-3",children:[G,W]}),f[27]=G,f[28]=W,f[29]=X):X=f[29],f[30]!==p||f[31]!==H||f[32]!==X?(Z=l.jsxs(s,{className:"w-full",form:p,onFinish:H,children:[V,X]}),f[30]=p,f[31]=H,f[32]=X,f[33]=Z):Z=f[33],f[34]===Symbol.for("react.memo_cache_sentinel")?(ee=l.jsx(c,{className:"my-3"}),f[34]=ee):ee=f[34],f[35]!==j?(te=l.jsx("div",{className:"mb-3",children:l.jsx(a,{type:"primary",onClick:()=>{d.show(m,{title:"新增推荐",children:l.jsx(h,{refresh:j})})},children:"新增推荐"})}),f[35]=j,f[36]=te):te=f[36],f[37]!==k?(se={searchParams:k},f[37]=k,f[38]=se):se=f[38],f[39]!==E||f[40]!==u||f[41]!==se?(re=l.jsx(b,{columns:E,getListUrl:x.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:u,params:se}),f[39]=E,f[40]=u,f[41]=se,f[42]=re):re=f[42],f[43]!==Z||f[44]!==te||f[45]!==re?(le=l.jsxs(C,{children:[Z,ee,te,re]}),f[43]=Z,f[44]=te,f[45]=re,f[46]=le):le=f[46],le}function v(e){return l.jsx(f,{color:e?"geekblue":"red",bordered:!1,icon:l.jsx(j,{}),children:e||"已注销"})}function F(e,t){return l.jsx(f,{color:t.tagColor,children:t.tagText||"-"})}function I(e){return l.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function R(e,t){return e?l.jsx(u,{src:e,width:"auto",height:32,className:"p-1 rounded-lg",style:{backgroundColor:t.iconBackground},fallback:"/icons/default_image.svg",preview:{maskClassName:"rounded-lg"}}):"-"}function T(e){return l.jsx(f,{color:"gold",icon:l.jsx(N,{}),children:e||"-"})}function M(e){return l.jsx(f,{color:0===e?"blue":1===e?"green":"red",children:0===e?"待审核":1===e?"正常":"被驳回"})}const z=r.memo(t=>{const s=e.c(26),{record:i,refresh:n}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,h]=r.useState(o);let f;s[1]!==i||s[2]!==n?(f=function(){p(1,h);const e=y.getState().user.token;setTimeout(()=>{k({url:x.deleteRecommendApp,token:e,data:{id:i.id}}).then(e=>{200===e?.code&&n()}).finally(()=>{g(1,h)})},500)},s[1]=i,s[2]=n,s[3]=f):f=s[3];const u=f;let j,_,b,C,N,A,v,F,I;return s[4]===Symbol.for("react.memo_cache_sentinel")?(j={width:"44px"},s[4]=j):j=s[4],s[5]!==i||s[6]!==n?(_=()=>{d.show(m,{title:"编辑推荐",children:l.jsx(B,{editItem:i,refresh:n})})},s[5]=i,s[6]=n,s[7]=_):_=s[7],s[8]!==c[0]?(b=c[0]?l.jsx(S,{}):"编辑",s[8]=c[0],s[9]=b):b=s[9],s[10]!==c[0]||s[11]!==_||s[12]!==b?(C=l.jsx(a,{type:"link",size:"small",disabled:c[0],style:j,onClick:_,children:b}),s[10]=c[0],s[11]=_,s[12]=b,s[13]=C):C=s[13],s[14]===Symbol.for("react.memo_cache_sentinel")?(N={width:"44px"},s[14]=N):N=s[14],s[15]!==c[1]?(A=c[1]?l.jsx(S,{}):"删除",s[15]=c[1],s[16]=A):A=s[16],s[17]!==c[1]||s[18]!==A?(v=l.jsx(a,{danger:!0,type:"link",size:"small",disabled:c[1],style:N,children:A}),s[17]=c[1],s[18]=A,s[19]=v):v=s[19],s[20]!==u||s[21]!==v?(F=l.jsx(w,{title:"是否确认删除该推荐？",onConfirm:u,children:v}),s[20]=u,s[21]=v,s[22]=F):F=s[22],s[23]!==C||s[24]!==F?(I=l.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),s[23]=C,s[24]=F,s[25]=I):I=s[25],I}),B=t=>{const s=e.c(3),{editItem:r,refresh:i}=t;let n;return s[0]!==r||s[1]!==i?(n=l.jsx(l.Fragment,{children:l.jsx(h,{editItem:r,refresh:i,type:"edit"})}),s[0]=r,s[1]=i,s[2]=n):n=s[2],n};export{A as default};
