import{bY as e,r as o,j as t,bZ as l,ab as r,B as s,b_ as a,b$ as n,c0 as c,c1 as i,c2 as d,e as x,c3 as m,E as g,aI as u,c as h,t as b,c4 as p,N as f,aC as j}from"./main-CpZfXOxn.js";import{H as y,a as v}from"./index-BbsGuSR4.js";function k(o){return e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(o)}const w=e=>{const o=h.c(21),{label:l,value:r,icon:s,color:a,loading:n}=e,{token:c}=b.useToken();let d,x;o[0]!==c.colorBgContainer||o[1]!==c.colorBorderSecondary?(d={background:c.colorBgContainer,borderColor:c.colorBorderSecondary},o[0]=c.colorBgContainer,o[1]=c.colorBorderSecondary,o[2]=d):d=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(x={rows:2},o[3]=x):x=o[3];const m=`p-3 rounded-full ${a} text-white`;let g,u;o[4]!==s||o[5]!==m?(g=t.jsx("div",{className:m,children:s}),o[4]=s,o[5]=m,o[6]=g):g=o[6],o[7]!==l?(u=t.jsx("p",{className:"text-gray-500 text-sm font-semibold",children:l}),o[7]=l,o[8]=u):u=o[8];const p="number"==typeof r?r:r??0;let f,j,y,v;return o[9]!==p?(f=t.jsx("p",{className:"text-xl font-bold h-7",children:p}),o[9]=p,o[10]=f):f=o[10],o[11]!==u||o[12]!==f?(j=t.jsxs("div",{className:"ml-4 flex flex-col gap-1",children:[u,f]}),o[11]=u,o[12]=f,o[13]=j):j=o[13],o[14]!==n||o[15]!==g||o[16]!==j?(y=t.jsxs(i,{title:!1,className:"h-[52px]",paragraph:x,loading:n,children:[g,j]}),o[14]=n,o[15]=g,o[16]=j,o[17]=y):y=o[17],o[18]!==d||o[19]!==y?(v=t.jsx("div",{className:"rounded-lg border p-6 flex items-center",style:d,children:y}),o[18]=d,o[19]=y,o[20]=v):v=o[20],v},B=o.memo(e=>{const o=h.c(34),{item:l}=e,{token:r}=b.useToken();let s;o[0]!==r.colorBgContainer||o[1]!==r.colorBgTextHover||o[2]!==r.colorBorderSecondary?(s={"--hover-bg":r.colorBgTextHover,"--normal-bg":r.colorBgContainer,borderColor:r.colorBorderSecondary,height:"100px"},o[0]=r.colorBgContainer,o[1]=r.colorBgTextHover,o[2]=r.colorBorderSecondary,o[3]=s):s=o[3];const a=s;let n,c,i,d,x,m,g,u,j,y,v,k;return o[4]!==l.link?(n=()=>window.open(l.link,"_blank"),o[4]=l.link,o[5]=n):n=o[5],o[6]!==l.iconBackground?(c={background:l.iconBackground},o[6]=l.iconBackground,o[7]=c):c=o[7],o[8]!==l.icon?(i=p(l.icon),o[8]=l.icon,o[9]=i):i=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(d={width:"100%"},o[10]=d):d=o[10],o[11]!==i?(x=t.jsx("img",{src:i,style:d,onError:C}),o[11]=i,o[12]=x):x=o[12],o[13]!==c||o[14]!==x?(m=t.jsx("div",{className:"w-16 h-16 ml-3 transition-main rounded-2xl overflow-visible flex-center hover:scale-110",style:c,children:x}),o[13]=c,o[14]=x,o[15]=m):m=o[15],o[16]!==l.tagColor||o[17]!==l.tagText?(g=l?.tagText&&t.jsx(f,{color:l?.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.8},children:l?.tagText}),o[16]=l.tagColor,o[17]=l.tagText,o[18]=g):g=o[18],o[19]!==l.title?(u=t.jsx("p",{className:"text-base font-semibold line-clamp-1",children:l.title}),o[19]=l.title,o[20]=u):u=o[20],o[21]!==g||o[22]!==u?(j=t.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[g,u]}),o[21]=g,o[22]=u,o[23]=j):j=o[23],o[24]!==l.description?(y=t.jsx("p",{className:"text-gray-500 line-clamp-2 font-medium",children:l.description}),o[24]=l.description,o[25]=y):y=o[25],o[26]!==j||o[27]!==y?(v=t.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[j,y]}),o[26]=j,o[27]=y,o[28]=v):v=o[28],o[29]!==a||o[30]!==v||o[31]!==n||o[32]!==m?(k=t.jsxs("div",{style:a,className:"antd-bg cursor-pointer rounded-lg p-3 border transition-main flex items-center gap-x-6",onClick:n,children:[m,v]}),o[29]=a,o[30]=v,o[31]=n,o[32]=m,o[33]=k):k=o[33],k},(e,o)=>j(e,o));function N(){const[e,h]=o.useState(null),[b,p]=o.useState(!0),[f,j]=o.useState(null),[N,C]=o.useState(!0),S=[{icon:"https://www.rainyun.com/img/logo.d193755d.png",link:d,title:"高性价比云服务器",description:"雨云成立于2018年，是具有自主知识产权的国产云计算服务提供商。雨云为广大用户提供简单易用、便宜实惠、可信赖的云产品。"}];o.useLayoutEffect(()=>{r({url:T+"api/recommendApp",catchMsg:!1}).then(e=>{e?.data&&j(e.data)}).finally(()=>{C(!1)}),function(){const e=x.getState().user.token;r({url:g.getDashboardStats,token:e}).then(e=>{h(e.data),p(!1)}).catch(e=>{p(!1),console.error(e)})}()},[]);const _=[{label:"总用户数",value:e?.total_users,icon:t.jsx(y,{size:24}),color:"bg-blue-500"},{label:"今日新增用户",value:e?.new_users_today,icon:t.jsx(v,{size:24}),color:"bg-green-500"},{label:"网站总数",value:e?.total_websites,icon:t.jsx(l,{size:24}),color:"bg-purple-500"},{label:"用户分享页",value:e?.total_user_shares,icon:t.jsx(k,{size:24}),color:"bg-yellow-500"}],T="https://web.gotab.cn".endsWith("/")?"https://web.gotab.cn":"https://web.gotab.cn/";return t.jsxs("main",{className:"p-3 overflow-scroll",children:[t.jsxs("div",{className:"flex mb-3 ml-1 justify-between items-center",children:[t.jsx("h1",{className:"text-lg font-bold",children:"数据概览"}),t.jsx(s,{icon:t.jsx(a,{}),onClick:function(){const e=x.getState().user.token;m({url:g.exportConfigToml,token:e,responseType:"blob"}).then(e=>{u.saveAs(e.data,"config.toml")})},children:"导出配置文件"})]}),t.jsx(n,{gutter:[12,12],children:_.map((e,o)=>t.jsx(c,{xs:{flex:"100%"},md:{flex:"50%"},lg:{flex:"50%"},xl:{flex:"25%"},children:t.jsx(w,{...e,loading:b})},o))}),t.jsx("h1",{className:"text-lg font-bold my-3 ml-1",children:"🔥 每日宝藏"}),t.jsx("div",{className:"flex flex-col w-full gap-3",children:t.jsx(i,{loading:N||b,className:"p-3",children:f?.length>0?f?.map((e,o)=>t.jsx(B,{item:e},o)):S.map((e,o)=>t.jsx(B,{item:e},o))})})]})}function C(e){e.currentTarget.src="/icons/default_image.svg"}export{N as default};
