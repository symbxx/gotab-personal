import{c as e,F as l,r as a,j as s,x as r,N as t,aa as n,B as o,o as c,D as m,e as i,ab as u,J as d,E as f,ac as h,Q as p,ao as x,G as S}from"./main-rLKgjl6z.js";import{r as j}from"./transformData-yVR3GZRW.js";import{C as b}from"./contentLayout-BV-z6pyC.js";function _(){const _=e.c(33),[y]=l.useForm();let g;_[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],_[0]=g):g=_[0];const[w,q]=a.useState(g);let T;_[1]!==y?(T=function(){m(0,q);const e=i.getState().user.token;u({url:S.getSmtpConfig,token:e}).then(e=>{y.setFieldsValue(j(e.data))}).finally(()=>{d(0,q)})},_[1]=y,_[2]=T):T=_[2];const C=T;let N,F,L;_[3]!==C?(N=()=>{C()},_[3]=C,_[4]=N):N=_[4],_[5]===Symbol.for("react.memo_cache_sentinel")?(F=[],_[5]=F):F=_[5],a.useEffect(N,F),_[6]===Symbol.for("react.memo_cache_sentinel")?(L=function(e){m(1,q);const l=i.getState().user.token;f({url:S.updateSmtpConfig,token:l,data:e}).finally(()=>{d(1,q)})},_[6]=L):L=_[6];const k=L;let v;_[7]!==y?(v=function(){m(1,q);const e=i.getState().user.token;f({url:S.clearSmtpConfig,token:e}).finally(()=>{y.resetFields(),y.setFieldValue("port",0),d(1,q)})},_[7]=y,_[8]=v):v=_[8];const I=v;let A,D,E,R,V,B,G,J,P,Q,Z,$,z,H;return _[9]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(h,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"mr-1"}),"更新用于用户注册的邮箱验证码发送验证的邮件服务器配置，推荐使用：阿里企业邮箱或者微信企业邮箱"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),_[9]=A):A=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(D={flex:"120px"},_[10]=D):D=_[10],_[11]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(l.Item,{label:"服务器地址",required:!0,name:"host",rules:[{required:!0}],children:s.jsx(r,{placeholder:"服务器地址"})}),_[11]=E):E=_[11],_[12]===Symbol.for("react.memo_cache_sentinel")?(R=[{required:!0}],_[12]=R):R=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(l.Item,{label:"加密方式",required:!0,name:"encryption",rules:R,children:s.jsx(t,{placeholder:"加密方式",options:[{value:"None",label:"不加密"},{value:"SSL/TLS",label:"SSL/TLS"},{value:"STARTTLS",label:"STARTTLS"}]})}),_[13]=V):V=_[13],_[14]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(l.Item,{label:"端口",required:!0,name:"port",rules:[{required:!0}],children:s.jsx(n,{placeholder:"端口"})}),_[14]=B):B=_[14],_[15]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(l.Item,{label:"用户名",required:!0,name:"username",rules:[{required:!0}],children:s.jsx(r,{placeholder:"用户名"})}),_[15]=G):G=_[15],_[16]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(l.Item,{label:"密码",required:!0,name:"password",rules:[{required:!0}],children:s.jsx(r.Password,{autoComplete:"new-password",placeholder:"密码"})}),_[16]=J):J=_[16],_[17]!==w[1]?(P=s.jsx(o,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:w[1],children:"保存配置"}),_[17]=w[1],_[18]=P):P=_[18],_[19]!==w[1]?(Q=s.jsx(o,{danger:!0,loading:w[1],children:"删除配置"}),_[19]=w[1],_[20]=Q):Q=_[20],_[21]!==I||_[22]!==Q?(Z=s.jsx(x,{title:"是否确认删除？",onConfirm:I,children:Q}),_[21]=I,_[22]=Q,_[23]=Z):Z=_[23],_[24]!==P||_[25]!==Z?($=s.jsxs("div",{className:"w-full flex justify-center gap-3 flex-wrap",children:[P,Z]}),_[24]=P,_[25]=Z,_[26]=$):$=_[26],_[27]!==y||_[28]!==$?(z=s.jsxs(l,{autoComplete:"off",form:y,className:"w-full",labelCol:D,onFinish:k,children:[E,V,B,G,J,$]}),_[27]=y,_[28]=$,_[29]=z):z=_[29],_[30]!==w[0]||_[31]!==z?(H=s.jsxs(b,{children:[A,s.jsx("div",{className:"w-full",children:s.jsx(c,{spinning:w[0],children:z})})]}),_[30]=w[0],_[31]=z,_[32]=H):H=_[32],H}export{_ as default};
