import{c as e,ap as t,j as s,r as n,B as r,ac as i,O as l,a0 as a,E as o,aB as c,N as d,aq as m,e as p,C as h,D as f,H as x,ao as j}from"./main-CZX57bh3.js";import{M as u,R as y}from"./myTable-BFrsHbph.js";import{C as k}from"./contentLayout-CtF6294c.js";import{R as g}from"./ReloadOutlined-DOwImg_F.js";import"./transformData-BNZALuk1.js";import"./MoneyCollectOutlined-Cy-ZG86D.js";import"./AlipayOutlined-C07KGgJF.js";import"./index-FZwoVPSG.js";function w(){const n=e.c(21),{key:c,refresh:d}=t();let m,p,h,f,x,j,y,w;n[0]===Symbol.for("react.memo_cache_sentinel")?(m={title:"应用标题",key:"title",width:160,fixed:"left"},p={title:"应用描述",key:"description",width:460},h={title:"图标",key:"icon",width:100,render:S},f={title:"链接",key:"link",width:120,render:C},x={title:"标签",width:120,render:b},j={title:"提交人",key:"username",width:160,render:_},y={type:"time",title:"提交时间",key:"createdTime",width:200},n[0]=m,n[1]=p,n[2]=h,n[3]=f,n[4]=x,n[5]=j,n[6]=y):(m=n[0],p=n[1],h=n[2],f=n[3],x=n[4],j=n[5],y=n[6]),n[7]!==d?(w=[m,p,h,f,x,j,y,{title:"操作",fixed:"right",width:180,render:(e,t)=>s.jsx(A,{record:t,refresh:d})}],n[7]=d,n[8]=w):w=n[8];const N=w;let R,v,T,z,O,B,L;return n[9]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(g,{}),n[9]=R):R=n[9],n[10]!==d?(v=s.jsx(r,{type:"primary",icon:R,onClick:()=>{d()},children:"刷新列表"}),n[10]=d,n[11]=v):v=n[11],n[12]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(i,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"mr-1"}),"应用推荐将展示在 “ 每日宝藏 ” 中，服务端设置了 5 分钟缓存，如需查看最新的 “ 每日宝藏 ” 列表，请等待缓存失效或重启服务"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),z=s.jsx(a,{className:"my-3"}),n[12]=T,n[13]=z):(T=n[12],z=n[13]),n[14]===Symbol.for("react.memo_cache_sentinel")?(O={searchParams:{status:0}},n[14]=O):O=n[14],n[15]!==N||n[16]!==c?(B=s.jsx(u,{columns:N,getListUrl:o.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:c,params:O}),n[15]=N,n[16]=c,n[17]=B):B=n[17],n[18]!==B||n[19]!==v?(L=s.jsxs(k,{children:[v,T,z,B]}),n[18]=B,n[19]=v,n[20]=L):L=n[20],L}function _(e){return s.jsx(d,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(m,{}),children:e||"已注销"})}function b(e,t){return s.jsx(d,{color:t.tagColor,children:t.tagText||"-"})}function C(e){return s.jsx(r,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function S(e,t){return e?s.jsx(c,{src:e,width:"auto",height:32,className:"p-2 rounded-lg",style:{backgroundColor:t.iconBackground},preview:{maskClassName:"rounded-lg"},fallback:"/icons/default_image.svg"}):"-"}const A=n.memo(t=>{const i=e.c(42),{record:l,refresh:a}=t;let c;i[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],i[0]=c):c=i[0];const[d,m]=n.useState(c);let u;i[1]!==l||i[2]!==a?(u=function(){const e=p.getState().user.token;h(0,m),setTimeout(()=>{f({url:o.approveRecommendApp,token:e,data:{id:l.id}}).then(e=>{200===e?.code&&a()}).finally(()=>{x(0,m)})},500)},i[1]=l,i[2]=a,i[3]=u):u=i[3];const k=u;let g;i[4]!==l||i[5]!==a?(g=function(e,t){h(t,m);const s=p.getState().user.token;setTimeout(()=>{f({url:"reject"===e?o.rejectRecommendApp:o.deleteRecommendApp,token:s,data:{id:l.id}}).then(e=>{200===e?.code&&a()}).finally(()=>{x(t,m)})},500)},i[4]=l,i[5]=a,i[6]=g):g=i[6];const w=g;let _,b,C,S,A;i[7]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},i[7]=_):_=i[7],i[8]!==d[0]?(b=d[0]?s.jsx(y,{}):"通过",i[8]=d[0],i[9]=b):b=i[9],i[10]!==d[0]||i[11]!==b?(C=s.jsx(r,{type:"link",size:"small",disabled:d[0],style:_,children:b}),i[10]=d[0],i[11]=b,i[12]=C):C=i[12],i[13]!==k||i[14]!==C?(S=s.jsx(j,{title:"是否确认审核通过？",onConfirm:k,children:C}),i[13]=k,i[14]=C,i[15]=S):S=i[15],i[16]!==w?(A=()=>{w("reject",1)},i[16]=w,i[17]=A):A=i[17];const N=d[1]||d[2];let R,v,T,z,O;i[18]===Symbol.for("react.memo_cache_sentinel")?(R={width:"44px"},i[18]=R):R=i[18],i[19]!==d[1]?(v=d[1]?s.jsx(y,{}):"驳回",i[19]=d[1],i[20]=v):v=i[20],i[21]!==v||i[22]!==N?(T=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:N,style:R,children:v}),i[21]=v,i[22]=N,i[23]=T):T=i[23],i[24]!==T||i[25]!==A?(z=s.jsx(j,{title:"是否确认驳回申请",onConfirm:A,children:T}),i[24]=T,i[25]=A,i[26]=z):z=i[26],i[27]!==w?(O=()=>{w("delete",2)},i[27]=w,i[28]=O):O=i[28];const B=d[1]||d[2];let L,D,K,M,q;return i[29]===Symbol.for("react.memo_cache_sentinel")?(L={width:"44px"},i[29]=L):L=i[29],i[30]!==d[2]?(D=d[2]?s.jsx(y,{}):"删除",i[30]=d[2],i[31]=D):D=i[31],i[32]!==B||i[33]!==D?(K=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:B,style:L,children:D}),i[32]=B,i[33]=D,i[34]=K):K=i[34],i[35]!==O||i[36]!==K?(M=s.jsx(j,{title:"是否确认删除该申请？",onConfirm:O,children:K}),i[35]=O,i[36]=K,i[37]=M):M=i[37],i[38]!==z||i[39]!==M||i[40]!==S?(q=s.jsxs("div",{className:"flex flex-wrap",children:[S,z,M]}),i[38]=z,i[39]=M,i[40]=S,i[41]=q):q=i[41],q});export{w as default};
