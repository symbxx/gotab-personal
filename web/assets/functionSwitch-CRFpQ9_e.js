import{c as e,F as a,r as l,j as o,a9 as s,aa as r,x as n,B as t,o as c,D as m,e as i,ab as u,J as d,E as f,ac as p,Q as h,a1 as b,G as x}from"./main-DBCALU0b.js";import{C as _}from"./contentLayout-BIZLtLYj.js";function j(){const j=e.c(34),[g]=a.useForm();let S;j[0]===Symbol.for("react.memo_cache_sentinel")?(S=[],j[0]=S):S=j[0];const[y,v]=l.useState(S);let w;j[1]!==g?(w=function(){m(0,v);const e=i.getState().user.token;u({url:x.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),e.data?.sourceStoreFrom||(e.data.sourceStoreFrom="official"),e.data?.homePageLimit||(e.data.homePageLimit="close"),e.data?.userRegister||(e.data.userRegister="open"),e.data?.uploadWallpaper||(e.data.uploadWallpaper="open"),g.setFieldsValue(e.data))}).finally(()=>{d(0,v)})},j[1]=g,j[2]=w):w=j[2];const q=w;let F,I,N;j[3]!==q?(F=()=>{q()},j[3]=q,j[4]=F):F=j[4],j[5]===Symbol.for("react.memo_cache_sentinel")?(I=[],j[5]=I):I=j[5],l.useEffect(F,I),j[6]===Symbol.for("react.memo_cache_sentinel")?(N=function(e){m(1,v);const a=i.getState().user.token;f({url:x.updateFunctionSwitch,token:a,data:e}).finally(()=>{d(1,v)})},j[6]=N):N=j[6];const B=N;let P,G,k,L,T,M,W,R,U,A,C,E,V,z,D,J,K,O,Q,Y,H,X;return j[7]===Symbol.for("react.memo_cache_sentinel")?(P=o.jsx(p,{type:"warning",description:o.jsxs(o.Fragment,{children:[o.jsx(h,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),j[7]=P):P=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(G={cardPush:"close",offlineToUse:"open",sourceStoreFrom:"official",homePageLimit:"close",userRegister:"open",uploadWallpaper:"open"},j[8]=G):G=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(k=[{required:!0,message:"请选择配置项的状态"}],j[9]=k):k=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(L=o.jsx(a.Item,{name:"cardPush",label:"添加卡片时推送至资源库",required:!0,rules:k,children:o.jsx(s.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),j[10]=L):L=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(T=[{required:!0,message:"请选择主页默认数据策略"}],j[11]=T):T=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(M=o.jsx(a.Item,{name:"offlineToUse",label:"主页默认数据策略",required:!0,rules:T,children:o.jsx(s.Group,{options:[{label:"初始化一次后，被持久缓存（离线使用）",value:"open"},{label:"跟随管理员账户配置，持续获取最新默认数据",value:"close"}]})}),j[12]=M):M=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(W=[{required:!0,message:"请选择资源库的数据来源"}],j[13]=W):W=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(R=o.jsx(a.Item,{name:"sourceStoreFrom",label:"资源库数据来源",required:!0,rules:W,children:o.jsx(s.Group,{options:[{label:"GOTAB 官方资源库",value:"official"},{label:"本站自有资源库",value:"self"}]})}),j[14]=R):R=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(U=[{required:!0,message:"请选择主页访问限制策略"}],j[15]=U):U=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(A=o.jsx(a.Item,{name:"homePageLimit",label:"主页访问限制策略",required:!0,rules:U,children:o.jsx(s.Group,{options:[{label:"需登录后访问（将不支持离线使用）",value:"useLogin"},{label:"关闭",value:"close"}]})}),j[16]=A):A=j[16],j[17]===Symbol.for("react.memo_cache_sentinel")?(C=[{required:!0}],j[17]=C):C=j[17],j[18]===Symbol.for("react.memo_cache_sentinel")?(E=o.jsx(a.Item,{name:"userRegister",label:"用户注册服务",required:!0,rules:C,children:o.jsx(s.Group,{options:[{label:"启用（需配置邮件服务）",value:"open"},{label:"关闭",value:"close"}]})}),j[18]=E):E=j[18],j[19]===Symbol.for("react.memo_cache_sentinel")?(V=[{required:!0}],j[19]=V):V=j[19],j[20]===Symbol.for("react.memo_cache_sentinel")?(z=o.jsx(a.Item,{name:"uploadWallpaper",label:"壁纸上传服务",required:!0,rules:V,children:o.jsx(s.Group,{options:[{label:"启用",value:"open"},{label:"关闭",value:"close"}]})}),j[20]=z):z=j[20],j[21]===Symbol.for("react.memo_cache_sentinel")?(D=o.jsx(a.Item,{name:"uploadWallpaperMaxSize",label:"壁纸文件大小限制（默认10MB）",children:o.jsx(r,{placeholder:"壁纸大小限制",max:10240,min:200,suffix:"KB",className:"min-w-36",stringMode:!0})}),J=o.jsx(b,{}),j[21]=D,j[22]=J):(D=j[21],J=j[22]),j[23]===Symbol.for("react.memo_cache_sentinel")?(K=o.jsx(a.Item,{name:"loginBackground",label:"登录页背景设置",children:o.jsx(n,{allowClear:!0,placeholder:"登录页背景，支持视频、图片链接，或者颜色值、渐变颜色，可以在主题壁纸中上传资源后，复制路径到此"})}),j[23]=K):K=j[23],j[24]===Symbol.for("react.memo_cache_sentinel")?(O=o.jsx(a.Item,{name:"loginBackgroundBrightness",label:"登录页背景亮度",children:o.jsx(r,{min:0,max:100,placeholder:"亮度",stringMode:!0,className:"max-w-[100px]",addonAfter:"%"})}),j[24]=O):O=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(Q=o.jsx(a.Item,{name:"loginBackgroundBlur",label:"登录页背景模糊度",children:o.jsx(r,{min:0,max:100,placeholder:"模糊",stringMode:!0,className:"max-w-[100px]",addonAfter:"px"})}),j[25]=Q):Q=j[25],j[26]!==y[1]?(Y=o.jsx("div",{className:"w-full flex justify-center",children:o.jsx(t,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:y[1],children:"保存配置"})}),j[26]=y[1],j[27]=Y):Y=j[27],j[28]!==g||j[29]!==Y?(H=o.jsxs(a,{onFinish:B,form:g,className:"px-3 w-full",initialValues:G,children:[L,M,R,A,E,z,D,J,K,O,Q,Y]}),j[28]=g,j[29]=Y,j[30]=H):H=j[30],j[31]!==y[0]||j[32]!==H?(X=o.jsxs(_,{children:[P,o.jsx("div",{className:"w-full",children:o.jsx(c,{spinning:y[0],children:H})})]}),j[31]=y[0],j[32]=H,j[33]=X):X=j[33],X}export{j as default};
