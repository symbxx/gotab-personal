import{c as e,ap as t,u as s,k as r,F as l,r as n,j as a,w as i,L as o,ab as c,aC as m,aD as d,ax as h,B as f,ay as u,a0 as x,ar as y,as as p,aE as j,E as b,N as g,q as k,aq as _,C as w,D as S,H as C,ao as N}from"./main-DdJGrvOf.js";import{r as v}from"./transformData-BL2NCpIA.js";import{M as I,R as A}from"./myTable-BS0sHOV7.js";import{C as L}from"./contentLayout-RA1HvZMl.js";import{R as F}from"./SortAscendingOutlined-B46CxJxA.js";import"./MoneyCollectOutlined-DTk1AFy0.js";import"./AlipayOutlined-Cz0xgrhK.js";import"./index-BlPJX3uW.js";function T(){const g=e.c(60),{key:k,refresh:_}=t(),w=s(),S=r(U);let C;g[0]!==S?(C=S.filter(K).map(q),g[0]=S,g[1]=C):C=g[1];const N=C,[A]=l.useForm();let F;g[2]===Symbol.for("react.memo_cache_sentinel")?(F={},g[2]=F):F=g[2];const[T,D]=n.useState(F);let H;g[3]!==S||g[4]!==w?(H=function(){c({url:b.getCategoryListWithAll}).then(e=>{if(200===e?.code&&e.data){const t=e.data.map(W);m(t,S)||w(d(t))}})},g[3]=S,g[4]=w,g[5]=H):H=g[5];const P=H;let V,Y,$,G,J,Q,X,Z,ee,te,se,re;g[6]!==S.length||g[7]!==P?(V=()=>{0===S.length&&P()},g[6]=S.length,g[7]=P,g[8]=V):V=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(Y=[],g[9]=Y):Y=g[9],n.useEffect(V,Y),g[10]===Symbol.for("react.memo_cache_sentinel")?(X={title:"网站名称",key:"title",width:200,fixed:"left"},Z={title:"状态",key:"status",width:80,render:R},ee={title:"排序",key:"sort",width:80,render:O},te={title:"网站描述",key:"description",width:450},se={title:"图标",key:"icon",width:140,render:z},$={title:"链接",key:"url",width:120,render:M},G={title:"所属分类",key:"categoryName",width:120},J={title:"提交人",key:"username",width:160,render:E},Q={type:"time",title:"更新时间",key:"createdTime",width:200},g[10]=$,g[11]=G,g[12]=J,g[13]=Q,g[14]=X,g[15]=Z,g[16]=ee,g[17]=te,g[18]=se):($=g[10],G=g[11],J=g[12],Q=g[13],X=g[14],Z=g[15],ee=g[16],te=g[17],se=g[18]),g[19]!==_?(re=[X,Z,ee,te,se,$,G,J,Q,{title:"操作",fixed:"right",width:120,render:(e,t)=>a.jsx(B,{record:t,refresh:_})}],g[19]=_,g[20]=re):re=g[20];const le=re;let ne,ae,ie,oe,ce,me,de,he,fe,ue,xe,ye,pe,je,be,ge,ke,_e,we;return g[21]!==A?(ne=()=>{const e=A.getFieldsValue();e[Math.random()]=!0,D(v(e))},g[21]=A,g[22]=ne):ne=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(ae={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridAutoRows:"32px"},g[23]=ae):ae=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(ie=a.jsx(l.Item,{name:"title",children:a.jsx(i,{placeholder:"标题"})}),g[24]=ie):ie=g[24],g[25]===Symbol.for("react.memo_cache_sentinel")?(oe=a.jsx(l.Item,{name:"link",children:a.jsx(i,{placeholder:"链接"})}),g[25]=oe):oe=g[25],g[26]===Symbol.for("react.memo_cache_sentinel")?(ce=a.jsx(l.Item,{name:"username",children:a.jsx(i,{placeholder:"用户名"})}),g[26]=ce):ce=g[26],g[27]!==N?(me=a.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:ae,children:[ie,oe,ce,a.jsx(l.Item,{name:"categoryId",children:a.jsx(o,{placeholder:"分类",options:N,allowClear:!0})})]}),g[27]=N,g[28]=me):me=g[28],g[29]!==A?(de=()=>{A.submit()},g[29]=A,g[30]=de):de=g[30],g[31]===Symbol.for("react.memo_cache_sentinel")?(he=a.jsx(h,{}),g[31]=he):he=g[31],g[32]!==de?(fe=a.jsx(f,{type:"primary",onClick:de,icon:he,children:"查询"}),g[32]=de,g[33]=fe):fe=g[33],g[34]!==A?(ue=()=>{A.resetFields();const e={};e[Math.random()]=!0,D(e)},g[34]=A,g[35]=ue):ue=g[35],g[36]===Symbol.for("react.memo_cache_sentinel")?(xe=a.jsx(u,{}),g[36]=xe):xe=g[36],g[37]!==ue?(ye=a.jsx(f,{onClick:ue,icon:xe,children:"重置"}),g[37]=ue,g[38]=ye):ye=g[38],g[39]!==fe||g[40]!==ye?(pe=a.jsxs("div",{className:"flex flex-wrap gap-3",children:[fe,ye]}),g[39]=fe,g[40]=ye,g[41]=pe):pe=g[41],g[42]!==A||g[43]!==ne||g[44]!==me||g[45]!==pe?(je=a.jsxs(l,{className:"w-full",form:A,onFinish:ne,children:[me,pe]}),g[42]=A,g[43]=ne,g[44]=me,g[45]=pe,g[46]=je):je=g[46],g[47]===Symbol.for("react.memo_cache_sentinel")?(be=a.jsx(x,{className:"my-3"}),g[47]=be):be=g[47],g[48]!==_?(ge=a.jsx("div",{className:"mb-3",children:a.jsx(f,{type:"primary",onClick:()=>{y.show(p,{title:"新增收录",children:a.jsx(j,{refresh:_})})},children:"新增收录"})}),g[48]=_,g[49]=ge):ge=g[49],g[50]!==T?(ke={searchParams:T},g[50]=T,g[51]=ke):ke=g[51],g[52]!==le||g[53]!==k||g[54]!==ke?(_e=a.jsx(I,{columns:le,getListUrl:b.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:k,params:ke}),g[52]=le,g[53]=k,g[54]=ke,g[55]=_e):_e=g[55],g[56]!==je||g[57]!==ge||g[58]!==_e?(we=a.jsxs(L,{children:[je,be,ge,_e]}),g[56]=je,g[57]=ge,g[58]=_e,g[59]=we):we=g[59],we}function E(e){return a.jsx(g,{color:e?"geekblue":"red",bordered:!1,icon:a.jsx(_,{}),children:e||"已注销"})}function M(e){return a.jsx(f,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function z(e,t){return e?a.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[a.jsx("img",{src:k(e),className:"rounded-sm",style:{width:"32px",height:"32px"},onError:D}),a.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function D(e){e.currentTarget.src="/icons/default_image.svg"}function O(e){return a.jsx(g,{color:"gold",icon:a.jsx(F,{}),children:e||"-"})}function R(e){return a.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function W(e){return{label:e.label,key:e.id}}function q(e){return{label:e.label,value:String(e.key)}}function K(e){return e&&0!==e.key}function U(e){return e.stateUtils.categoryList}const B=n.memo(t=>{const s=e.c(24),{record:l,refresh:i}=t;let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],s[0]=o):o=s[0];const[c,m]=n.useState(o),d=r(H);let h;s[1]!==l||s[2]!==i||s[3]!==d?(h=function(){w(1,m),setTimeout(()=>{S({url:b.deleteWebsiteInfo,token:d,data:{id:l.id}}).then(e=>{200===e?.code&&i()}).finally(()=>{C(1,m)})},500)},s[1]=l,s[2]=i,s[3]=d,s[4]=h):h=s[4];const u=h;let x,g,k,_,v,I,L,F;return s[5]===Symbol.for("react.memo_cache_sentinel")?(x={width:"44px"},s[5]=x):x=s[5],s[6]!==l||s[7]!==i?(g=()=>{y.show(p,{title:"编辑收录信息",children:a.jsx(j,{editItem:l,refresh:i,type:"edit"})})},s[6]=l,s[7]=i,s[8]=g):g=s[8],s[9]!==c[0]||s[10]!==g?(k=a.jsx(f,{type:"link",size:"small",disabled:c[0],style:x,onClick:g,children:"编辑"}),s[9]=c[0],s[10]=g,s[11]=k):k=s[11],s[12]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},s[12]=_):_=s[12],s[13]!==c[1]?(v=c[1]?a.jsx(A,{}):"删除",s[13]=c[1],s[14]=v):v=s[14],s[15]!==c[1]||s[16]!==v?(I=a.jsx(f,{danger:!0,type:"link",size:"small",disabled:c[1],style:_,children:v}),s[15]=c[1],s[16]=v,s[17]=I):I=s[17],s[18]!==u||s[19]!==I?(L=a.jsx(N,{title:"是否确认删除该收录？",onConfirm:u,children:I}),s[18]=u,s[19]=I,s[20]=L):L=s[20],s[21]!==k||s[22]!==L?(F=a.jsxs("div",{className:"flex flex-wrap",children:[k,L]}),s[21]=k,s[22]=L,s[23]=F):F=s[23],F});function H(e){return e.user.token}export{T as default};
