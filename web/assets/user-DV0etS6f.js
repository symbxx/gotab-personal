import{g as e,r as t,I as a,c as n,fi as l,l as r,j as s,B as o,D as i,E as c,G as m,$ as d,J as u,ac as f,ao as h,u as p,F as x,fj as j,ar as y,as as b,x as g,C as _,H as v,fk as w,U as S,ae as C,k,d as P,N as z,fl as N,aC as E,v as I,fm as O,fn as L,fo as T,bI as D,fp as A,fq as F,O as V,a1 as q,e$ as M,aG as Z,az as $,fr as U,cb as B,fs as H,bJ as R,ft as Y,e as G,bX as J,fu as K,fv as X,d0 as Q,cj as W,ck as ee,fw as te,ab as ae,a5 as ne,fx as le,fy as re,fz as se,fA as oe,fB as ie,fC as ce,fD as me,fE as de,ea as ue,fF as fe,fG as he,fH as pe,fI as xe,fJ as je,bb as ye,fK as be}from"./main-BrrS_iHi.js";import{r as ge}from"./DownloadOutlined-8OoaBVN3.js";var _e,ve={};function we(){if(_e)return ve;_e=1,Object.defineProperty(ve,"__esModule",{value:!0});return ve.default={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},ve}const Se=e(we());function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ce.apply(this,arguments)}const ke=(e,n)=>t.createElement(a,Ce({},e,{ref:n,icon:Se})),Pe=t.forwardRef(ke);const ze=e(ge());function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ne.apply(this,arguments)}const Ee=(e,n)=>t.createElement(a,Ne({},e,{ref:n,icon:ze})),Ie=t.forwardRef(Ee);var Oe,Le={};function Te(){if(Oe)return Le;Oe=1,Object.defineProperty(Le,"__esModule",{value:!0});return Le.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Le}const De=e(Te());function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ae.apply(this,arguments)}const Fe=(e,n)=>t.createElement(a,Ae({},e,{ref:n,icon:De})),Ve=t.forwardRef(Fe);var qe,Me={};function Ze(){if(qe)return Me;qe=1,Object.defineProperty(Me,"__esModule",{value:!0});return Me.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},Me}const $e=e(Ze());function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ue.apply(this,arguments)}const Be=(e,n)=>t.createElement(a,Ue({},e,{ref:n,icon:$e})),He=t.forwardRef(Be);function Re(e){return e.user.token}const Ye=t.memo(function(){const e=n.c(21),{getDefaultData:a}=l();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[0]=p):p=e[0];const[x,j]=t.useState(p),y=r(Re);let b;e[1]!==y?(b=function(){i(0,j),c({url:m.setDefaultData,token:y,data:{data:d()}}).finally(()=>{u(0,j)})},e[1]=y,e[2]=b):b=e[2];const g=b;let _,v,w,S,C,k,P,z,N;return e[3]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(f,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),e[3]=_):_=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(Ve,{}),e[4]=v):v=e[4],e[5]!==x[0]?(w=s.jsx(o,{type:"primary",icon:v,loading:x[0],children:"保存默认配置"}),e[5]=x[0],e[6]=w):w=e[6],e[7]!==g||e[8]!==w?(S=s.jsx(h,{title:"是否确认保存？",onConfirm:g,children:w}),e[7]=g,e[8]=w,e[9]=S):S=e[9],e[10]!==a?(C=()=>{a(1,j)},e[10]=a,e[11]=C):C=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(Ie,{}),e[12]=k):k=e[12],e[13]!==x[1]?(P=s.jsx(o,{loading:x[1],icon:k,children:"获取默认配置"}),e[13]=x[1],e[14]=P):P=e[14],e[15]!==C||e[16]!==P?(z=s.jsx(h,{title:"是否确认获取？",onConfirm:C,children:P}),e[15]=C,e[16]=P,e[17]=z):z=e[17],e[18]!==S||e[19]!==z?(N=s.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,S,z]}),e[18]=S,e[19]=z,e[20]=N):N=e[20],N});function Ge(){y.hide(b)}function Je(e){return e.user.userInfo}function Ke(e){return e.user.token}const Xe=t.memo(function(){const e=n.c(17),a=p(),[l,i]=t.useState(!1),d=r(Ke),u=r(Je);let h;e[0]!==a||e[1]!==d?(h=function(e){i(!0),c({url:m.submitAppellation,token:d,data:e}).then(e=>{200===e?.code&&e.data&&(a(j(e.data)),y.hide(b))}).finally(()=>{i(!1)})},e[0]=a,e[1]=d,e[2]=h):h=e[2];const _=h;let v,w,S,C,k,P,z;return e[3]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(f,{message:s.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),e[3]=v):v=e[3],e[4]!==u?(w=[{validator:(e,t)=>t&&""!==t?t.length>8?Promise.reject("称号名称不能超过8个字符"):t===u.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],e[4]=u,e[5]=w):w=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(g,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),e[6]=S):S=e[6],e[7]!==w?(C=s.jsx(x.Item,{label:"称号名称",required:!0,rules:w,name:"appellation",children:S}),e[7]=w,e[8]=C):C=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(o,{onClick:Ge,children:"取消"}),e[9]=k):k=e[9],e[10]!==l?(P=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[k,s.jsx(o,{type:"primary",htmlType:"submit",loading:l,children:"提交申请"})]}),e[10]=l,e[11]=P):P=e[11],e[12]!==_||e[13]!==C||e[14]!==P||e[15]!==u?(z=s.jsxs(s.Fragment,{children:[v,s.jsxs(x,{initialValues:u,onFinish:_,children:[C,P]})]}),e[12]=_,e[13]=C,e[14]=P,e[15]=u,e[16]=z):z=e[16],z});function Qe(){y.hide(b)}function We(){y.hide(b)}function et(){y.hide(b)}function tt(e,t){const a=new FileReader;let n=!1;const l=()=>{n||t(a.result)};a.addEventListener("loadend",l),a.readAsDataURL(e);return()=>{n=!0,a.removeEventListener("loadend",l),a.abort()}}function at(e){return e.user.userInfo}function nt(e){return e.user.token}const lt=t.memo(function(){const e=n.c(31),a=p(),l=r(nt),d=r(at);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[0]=f):f=e[0];const[h,x]=t.useState(f),[y,b]=t.useState(),[g,k]=t.useState(null),[P,z]=t.useState(null);let N,E;e[1]!==P?(N=()=>()=>{P&&P()},E=[P],e[1]=P,e[2]=N,e[3]=E):(N=e[2],E=e[3]),t.useEffect(N,E);const I=tt;let O;e[4]!==a||e[5]!==l?(O=()=>{i(0,x),c({url:m.resetAvatar,token:l}).then(e=>{200===e?.code&&e.data&&(a(j(e.data)),setTimeout(et,0))}).finally(()=>{u(0,x)})},e[4]=a,e[5]=l,e[6]=O):O=e[6];const L=O;let T;e[7]!==a||e[8]!==g||e[9]!==l||e[10]!==d?(T=()=>{g?(i(1,x),c({url:m.uploadAvatar,data:v({file:g}),token:l}).then(e=>{if(200===e?.code&&e.data){const t={...d,avatar:e.data.avatar_url};a(j(t)),setTimeout(We,0)}}).finally(()=>{u(1,x)})):_.error("请先选择一个图片")},e[7]=a,e[8]=g,e[9]=l,e[10]=d,e[11]=T):T=e[11];const D=T;let A,F,V,q,M,Z,$,U,B;return e[12]!==P?(A=()=>()=>{P&&P()},F=[P],e[12]=P,e[13]=A,e[14]=F):(A=e[13],F=e[14]),t.useEffect(A,F),e[15]===Symbol.for("react.memo_cache_sentinel")?(V=e=>{if(e.size>512e3)return _.error("头像大小不能超过500KB！"),!1;const t=I(e,t=>{b(t),k(e)});return z(()=>t),!1},e[15]=V):V=e[15],e[16]!==y?(q=s.jsx(w,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:s.jsx(S,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:V,children:y?s.jsx("img",{src:y,alt:"avatar",style:{width:"100%"}}):s.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[s.jsx(C,{}),s.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),e[16]=y,e[17]=q):q=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(o,{onClick:Qe,children:"取消"}),e[18]=M):M=e[18],e[19]!==h[0]||e[20]!==L?(Z=s.jsx(o,{loading:h[0],onClick:L,children:"恢复默认"}),e[19]=h[0],e[20]=L,e[21]=Z):Z=e[21],e[22]!==h[1]||e[23]!==D?($=s.jsx(o,{type:"primary",onClick:D,loading:h[1],children:"保存头像"}),e[22]=h[1],e[23]=D,e[24]=$):$=e[24],e[25]!==Z||e[26]!==$?(U=s.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[M,Z,$]}),e[25]=Z,e[26]=$,e[27]=U):U=e[27],e[28]!==U||e[29]!==q?(B=s.jsxs(s.Fragment,{children:[q,U]}),e[28]=U,e[29]=q,e[30]=B):B=e[30],B});function rt(){y.hide(b)}function st(e,t){if(!t)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function ot(e){200===e?.code&&y.hide(b)}function it(e){return e.user.token}const ct=t.memo(function(){const e=n.c(19),[a]=k();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[d,f]=t.useState(l),h=r(it);let p;e[1]!==h?(p=function(e){i(0,f),c({url:m.changePassword,data:e,token:h}).then(ot).finally(()=>{u(0,f)})},e[1]=h,e[2]=p):p=e[2];const j=p,y=st;let b,_,v,w,S,C,P,z,N;return e[3]===Symbol.for("react.memo_cache_sentinel")?(b={flex:"82px"},e[3]=b):b=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(x.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),e[4]=_):_=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(x.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:y}],children:s.jsx(g.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),e[5]=v):v=e[5],e[6]!==a?(w=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请再次输入密码"));return t!==a.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],e[6]=a,e[7]=w):w=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(g.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),e[8]=S):S=e[8],e[9]!==w?(C=s.jsx(x.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:w,children:S}),e[9]=w,e[10]=C):C=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(o,{onClick:rt,children:"取消"}),e[11]=P):P=e[11],e[12]!==d[0]?(z=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[P,s.jsx(o,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),e[12]=d[0],e[13]=z):z=e[13],e[14]!==j||e[15]!==a||e[16]!==C||e[17]!==z?(N=s.jsx(s.Fragment,{children:s.jsxs(x,{form:a,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:b,children:[_,v,C,z]})}),e[14]=j,e[15]=a,e[16]=C,e[17]=z,e[18]=N):N=e[18],N});function mt(){y.hide(b)}function dt(e,t){return t&&t.length>20&&t.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function ut(e){return e.user.userInfo}function ft(e){return e.user.token}const ht=t.memo(function(e){const a=n.c(23),{initialValues:l}=e,d=p();let f;a[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],a[0]=f):f=a[0];const[h,_]=t.useState(f),v=r(ft),w=r(ut);let S;a[1]!==d||a[2]!==v||a[3]!==w?(S=function(e){i(0,_),""!==e.birthday&&e.birthday||delete e.birthday,c({url:m.editUserInfo,data:e,token:v}).then(e=>{200===e?.code&&e.data&&(E(e.data,w)||d(j(e.data)),y.hide(b))}).finally(()=>{u(0,_)})},a[1]=d,a[2]=v,a[3]=w,a[4]=S):S=a[4];const C=S;let k,I,O,L,T,D,A,F,V,q,M;return a[5]!==l.birthday?(k=l.birthday&&P(l.birthday,"YYYY-MM-DD"),a[5]=l.birthday,a[6]=k):k=a[6],a[7]!==l||a[8]!==k?(I={...l,birthday:k},a[7]=l,a[8]=k,a[9]=I):I=a[9],a[10]===Symbol.for("react.memo_cache_sentinel")?(O={flex:"72px"},a[10]=O):O=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(x.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:s.jsx(g,{placeholder:"用户名",allowClear:!0,maxLength:20})}),a[11]=L):L=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(x.Item,{name:"nickname",label:"昵称",rules:[{validator:dt}],children:s.jsx(g,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),a[12]=T):T=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(x.Item,{name:"sex",label:"性别",required:!0,children:s.jsx(z,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),a[13]=D):D=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(x.Item,{name:"phone",label:"手机号",rules:[{validator(e,t){if(""===t||!t)return Promise.resolve();return/^1[3-9]\d{9}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:s.jsx(g,{placeholder:"手机号",maxLength:11,allowClear:!0})}),a[14]=A):A=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(x.Item,{name:"birthday",label:"生日",children:s.jsx(N,{placeholder:"生日",allowClear:!0})}),a[15]=F):F=a[15],a[16]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(o,{onClick:mt,children:"取消"}),a[16]=V):V=a[16],a[17]!==h[0]?(q=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[V,s.jsx(o,{type:"primary",htmlType:"submit",loading:h[0],children:"确定"})]}),a[17]=h[0],a[18]=q):q=a[18],a[19]!==C||a[20]!==q||a[21]!==I?(M=s.jsx(s.Fragment,{children:s.jsxs(x,{autoComplete:"off",initialValues:I,name:"edit-user-form",onFinish:C,labelCol:O,children:[L,T,D,A,F,q]})}),a[19]=C,a[20]=q,a[21]=I,a[22]=M):M=a[22],M});function pt(){y.hide(b)}function xt(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function jt(e){return e?.replace(/\D/g,"")}function yt(e){return e.user.userInfo}function bt(e){return e.user.token}const gt=t.memo(function(){const e=n.c(22),a=p(),[l]=k();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[f,h]=t.useState(d),v=r(bt),w=r(yt);let S;e[1]!==l?(S=function(){const e=l.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(i(0,h),c({url:m.emailCode,data:{email:e}}).finally(()=>{u(0,h)})):_.error("请输入有效的邮箱地址"):_.error("请输入邮箱")},e[1]=l,e[2]=S):S=e[2];const C=S;let P;e[3]!==a||e[4]!==v||e[5]!==w?(P=function(e){i(1,h),c({url:m.bindEmail,data:e,token:v}).then(e=>{200===e?.code&&e.data&&(E(e.data,w)||a(j(e.data)),y.hide(b))}).finally(()=>{u(1,h)})},e[3]=a,e[4]=v,e[5]=w,e[6]=P):P=e[6];const z=P;let N,I,O,L,T,D,A,F;return e[7]===Symbol.for("react.memo_cache_sentinel")?(N={flex:"72px"},e[7]=N):N=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(x.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,t)=>t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:s.jsx(g,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),e[8]=I):I=e[8],e[9]!==C||e[10]!==f[0]?(O=s.jsxs("div",{className:"flex gap-3 items-end",children:[I,s.jsx(o,{onClick:C,loading:f[0],className:"mb-6",children:"获取验证码"})]}),e[9]=C,e[10]=f[0],e[11]=O):O=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(L=[{validator:xt}],e[12]=L):L=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(x.Item,{name:"emailCode",required:!0,label:"验证码",normalize:jt,rules:L,children:s.jsx(g,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),e[13]=T):T=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(o,{onClick:pt,children:"取消"}),e[14]=D):D=e[14],e[15]!==f[1]?(A=s.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[D,s.jsx(o,{type:"primary",htmlType:"submit",loading:f[1],children:"确定"})]}),e[15]=f[1],e[16]=A):A=e[16],e[17]!==z||e[18]!==l||e[19]!==O||e[20]!==A?(F=s.jsx(s.Fragment,{children:s.jsxs(x,{form:l,onFinish:z,name:"user-email-form",labelCol:N,autoComplete:"off",children:[O,T,A]})}),e[17]=z,e[18]=l,e[19]=O,e[20]=A,e[21]=F):F=e[21],F});function _t(){y.show(b,{title:"注销账户",children:s.jsx(Nt,{})})}function vt(){y.show(b,{title:"退出登录",children:s.jsx(zt,{})})}function wt(){y.show(b,{title:"修改密码",children:s.jsx(ct,{})})}function St(){_.success("数据合并完成")}function Ct(){y.show(b,{title:"头像设置",children:s.jsx(lt,{})})}function kt(e){return e.user.userInfo}const Pt=t.memo(function(){const e=n.c(97),{pullData:a,pushData:i,getDefaultDataClear:c}=l(),m=r(kt);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[u,f]=t.useState(d);let p;e[1]!==m.email?(p=function(){y.show(b,{title:`绑定邮箱（原邮箱：${m.email||"无"}）`,children:s.jsx(gt,{})})},e[1]=m.email,e[2]=p):p=e[2];const x=p;let j,g,v,w,S,C,k,P;e[3]!==m.avatar||e[4]!==m.sex?(j=m?.avatar?I(m.avatar):1===m?.sex?O:L,e[3]=m.avatar,e[4]=m.sex,e[5]=j):j=e[5],e[6]!==j?(g=s.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:Ct,children:s.jsx(F,{size:72,src:j})}),e[6]=j,e[7]=g):g=e[7],e[8]!==m.appellation||e[9]!==m.appellationStatus?(v=m.appellation&&1===m.appellationStatus?s.jsx(T,{}):s.jsx(D,{}),e[8]=m.appellation,e[9]=m.appellationStatus,e[10]=v):v=e[10],e[11]!==m.appellation||e[12]!==m.appellationStatus||e[13]!==m.userType?(w=m.appellation&&1===m.appellationStatus?"volcano":A.find(e=>e.userType===m.userType)?.color,e[11]=m.appellation,e[12]=m.appellationStatus,e[13]=m.userType,e[14]=w):w=e[14],e[15]!==m.appellation||e[16]!==m.appellationStatus||e[17]!==m.userType?(S=m.appellation&&1===m.appellationStatus?m.appellation:A.find(e=>e.userType===m.userType)?.text,e[15]=m.appellation,e[16]=m.appellationStatus,e[17]=m.userType,e[18]=S):S=e[18],e[19]!==v||e[20]!==w||e[21]!==S?(C=s.jsx(V,{icon:v,className:"m-0 flex items-center gap-1",color:w,children:S}),e[19]=v,e[20]=w,e[21]=S,e[22]=C):C=e[22],e[23]!==g||e[24]!==C?(k=s.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[g,C]}),e[23]=g,e[24]=C,e[25]=k):k=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(P={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},e[26]=P):P=e[26];const z=m.username||"-";let N;e[27]!==z?(N={label:"用户名",children:z},e[27]=z,e[28]=N):N=e[28];const E=m.nickname||"-";let G;e[29]!==E?(G={label:"昵称",children:E},e[29]=E,e[30]=G):G=e[30];const J=1===m.sex?"女":"男";let K,X,Q;e[31]!==J?(K={label:"性别",children:J},e[31]=J,e[32]=K):K=e[32],e[33]!==x||e[34]!==m.email?(X=m.email||s.jsx(o,{type:"link",size:"small",className:"p-0",onClick:x,children:"绑定"}),e[33]=x,e[34]=m.email,e[35]=X):X=e[35],e[36]!==X?(Q={label:"邮箱",children:X},e[36]=X,e[37]=Q):Q=e[37];const W=m.phone||"-";let ee;e[38]!==W?(ee={label:"手机号",children:W},e[38]=W,e[39]=ee):ee=e[39];const te=m.birthday||"-";let ae;e[40]!==te?(ae={label:"生日",children:te},e[40]=te,e[41]=ae):ae=e[41];const ne=m.registerTime||"-";let le,re,se,oe,ie,ce,me,de,ue,fe,he,pe,xe;e[42]!==ne?(le={label:"注册时间",children:ne},e[42]=ne,e[43]=le):le=e[43],e[44]!==i?(re=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):i(0,f)},e[44]=i,e[45]=re):re=e[45],e[46]!==u[0]||e[47]!==re?(se=s.jsx(o,{type:"link",size:"small",onClick:re,loading:u[0],disabled:u[0],children:"上传"}),e[46]=u[0],e[47]=re,e[48]=se):se=e[48],e[49]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(q,{type:"vertical"}),e[49]=oe):oe=e[49],e[50]!==a?(ie=()=>{"1"===localStorage.getItem("focusPulling")?_.warning("数据自动同步中，请稍后再试"):a(1,f,void 0,!0)},e[50]=a,e[51]=ie):ie=e[51],e[52]!==u[1]||e[53]!==ie?(ce=s.jsx(o,{type:"link",size:"small",onClick:ie,loading:u[1],children:"拉取"}),e[52]=u[1],e[53]=ie,e[54]=ce):ce=e[54],e[55]!==se||e[56]!==ce?(me={label:"数据管理",children:s.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[se,oe,ce]})},e[55]=se,e[56]=ce,e[57]=me):me=e[57],e[58]!==c?(de=()=>{c(void 0,void 0,St,!0)},e[58]=c,e[59]=de):de=e[59],e[60]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(o,{type:"link",size:"small",className:"p-0",children:"合并数据"}),e[60]=ue):ue=e[60],e[61]!==de?(fe={label:"初始数据",children:s.jsx(s.Fragment,{children:s.jsx(h,{title:"将与本地数据差异化合并",onConfirm:de,children:ue})})},e[61]=de,e[62]=fe):fe=e[62],e[63]!==N||e[64]!==G||e[65]!==K||e[66]!==Q||e[67]!==ee||e[68]!==ae||e[69]!==le||e[70]!==me||e[71]!==fe?(he=s.jsx(M,{bordered:!0,column:1,className:"w-full mt-6",styles:P,items:[N,G,K,Q,ee,ae,le,me,fe]}),e[63]=N,e[64]=G,e[65]=K,e[66]=Q,e[67]=ee,e[68]=ae,e[69]=le,e[70]=me,e[71]=fe,e[72]=he):he=e[72],e[73]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(Z,{}),e[73]=pe):pe=e[73],e[74]!==m.appellation||e[75]!==m.appellationStatus?(xe=()=>{y.show(b,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[m.appellation&&1===m.appellationStatus?"变更称号":"申请称号",s.jsxs(V,{color:0===m.appellationStatus?"":1===m.appellationStatus?"green":"red",icon:0===m.appellationStatus?s.jsx($,{}):1===m.appellationStatus?s.jsx(U,{}):s.jsx(Pe,{}),children:["称号状态：",0===m.appellationStatus?m.appellation?"申请中":"待申请":1===m.appellationStatus?"已荣获":"被拒绝"]})]}),children:s.jsx(Xe,{})})},e[74]=m.appellation,e[75]=m.appellationStatus,e[76]=xe):xe=e[76];const je=0===m.appellationStatus?m.appellation?"称号管理":"申请称号":1===m.appellationStatus?"变更称号":"重新申请";let ye,be,ge,_e,ve,we,Se,Ce,ke,ze;return e[77]!==xe||e[78]!==je?(ye=s.jsx(o,{icon:pe,onClick:xe,children:je}),e[77]=xe,e[78]=je,e[79]=ye):ye=e[79],e[80]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(B,{}),e[80]=be):be=e[80],e[81]!==m?(ge=s.jsx(o,{icon:be,onClick:()=>{y.show(b,{title:"更新资料",children:s.jsx(ht,{initialValues:m})})},children:"更新资料"}),e[81]=m,e[82]=ge):ge=e[82],e[83]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(o,{icon:s.jsx(H,{}),onClick:wt,children:"修改密码"}),e[83]=_e):_e=e[83],e[84]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(R,{}),e[84]=ve):ve=e[84],e[85]!==x?(we=s.jsx(o,{icon:ve,onClick:x,children:"绑定邮箱"}),e[85]=x,e[86]=we):we=e[86],e[87]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(o,{icon:s.jsx(Y,{}),danger:!0,onClick:vt,children:"退出登录"}),e[87]=Se):Se=e[87],e[88]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx(o,{icon:s.jsx(He,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:_t,children:"注销账户？请慎重操作！"}),e[88]=Ce):Ce=e[88],e[89]!==ye||e[90]!==ge||e[91]!==we?(ke=s.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[ye,ge,_e,we,Se,Ce]}),e[89]=ye,e[90]=ge,e[91]=we,e[92]=ke):ke=e[92],e[93]!==he||e[94]!==ke||e[95]!==k?(ze=s.jsxs(s.Fragment,{children:[k,he,ke]}),e[93]=he,e[94]=ke,e[95]=k,e[96]=ze):ze=e[96],ze}),zt=()=>{const e=n.c(17),a=p(),{getDefaultDataClear:i}=l(),c=r(Et),[d,u]=t.useState(!1);let h;e[0]!==a?(h=function(){a(K("")),a(j({})),a(X(!1)),y.hide(b),Q||(y.hide(W),y.hide(ee))},e[0]=a,e[1]=h):h=e[1];const x=h;let g;e[2]!==d||e[3]!==x||e[4]!==a||e[5]!==i||e[6]!==c?(g=function(){if(x(),ae({url:m.logout,token:c}),_.success("退出成功"),d||!Q){i(10,void 0,e=>{ne(e)&&(a(le()),a(re()),a(se()),a(oe()),a(ie()),a(ce()),a(me()),a(de()),a(ue()),a(fe()),a(he()),a(pe()),a(xe()),a(je()))});const e=G.getState().stateUtils.mySwiper;if(e){G.getState().swiper.loop?e?.slideToLoop(0):e?.slideTo(0)}}},e[2]=d,e[3]=x,e[4]=a,e[5]=i,e[6]=c,e[7]=g):g=e[7];const v=g;let w,S,C,k,P;return e[8]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(f,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:s.jsx(te,{}),className:"rounded-md"}),e[8]=w):w=e[8],e[9]!==d?(S=Q&&s.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{u(!d)},children:[s.jsx(ye,{checked:d,className:"pointer-events-none"}),s.jsx("p",{children:"退出清空本地数据"})]}),e[9]=d,e[10]=S):S=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(o,{onClick:It,children:"取消"}),e[11]=C):C=e[11],e[12]!==v?(k=s.jsxs("div",{className:"flex gap-3 justify-end",children:[C,s.jsx(o,{danger:!0,type:"primary",onClick:v,children:"确定"})]}),e[12]=v,e[13]=k):k=e[13],e[14]!==S||e[15]!==k?(P=s.jsxs("div",{className:"flex flex-col gap-4",children:[w,S,k]}),e[14]=S,e[15]=k,e[16]=P):P=e[16],P},Nt=()=>{const e=n.c(7),a=p(),[l,r]=t.useState(!1);let i;e[0]!==a?(i=function(){r(!0);const e=G.getState().user.token;J({url:m.logOff,token:e}).then(e=>{200===e?.code&&(a(K("")),a(j({})),a(X(!1)),y.hide(b),Q||(y.hide(W),y.hide(ee)))}).finally(()=>{r(!1)})},e[0]=a,e[1]=i):i=e[1];const c=i;let d,u,h;return e[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(f,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:s.jsx(te,{}),className:"rounded-md"}),e[2]=d):d=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o,{onClick:Ot,children:"取消"}),e[3]=u):u=e[3],e[4]!==l||e[5]!==c?(h=s.jsxs("div",{className:"flex flex-col gap-4",children:[d,s.jsxs("div",{className:"flex gap-3 justify-end",children:[u,s.jsx(o,{danger:!0,type:"primary",onClick:c,loading:l,children:"确定"})]})]}),e[4]=l,e[5]=c,e[6]=h):h=e[6],h};function Et(e){return e.user.token}function It(){y.hide(b)}function Ot(){y.hide(b)}function Lt(){const e=n.c(11),a=p(),l=r(At),o=r(Dt),i=r(Tt);let c;e[0]!==a||e[1]!==l||e[2]!==o?(c=function(){ae({url:m.getUserInfo,token:l}).then(e=>{200===e?.code&&e.data&&(E(e.data,o)||a(j(e.data)))})},e[0]=a,e[1]=l,e[2]=o,e[3]=c):c=e[3];const d=c;let u,f,h;return e[4]!==d||e[5]!==l?(u=()=>{l&&d()},e[4]=d,e[5]=l,e[6]=u):u=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[7]=f):f=e[7],t.useEffect(u,f),e[8]!==i||e[9]!==l?(h=s.jsx("div",{className:"py-6 mx-auto w-full max-w-[390px]",children:l?i?s.jsx(Ye,{}):s.jsx(Pt,{}):s.jsx(be,{})}),e[8]=i,e[9]=l,e[10]=h):h=e[10],h}function Tt(e){return e.user.isSettingDefaultData}function Dt(e){return e.user.userInfo}function At(e){return e.user.token}export{Lt as default};
