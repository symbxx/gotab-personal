import{r as e,c as a,t as s,j as t,a0 as o,cy as r,u as l,cz as i,k as c,B as n,z as d,e as m,Q as p,V as x,W as g,X as h,Y as b}from"./main-CZX57bh3.js";import{b as u}from"./index-DVxqgrz8.js";const y={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gridAutoRows:"150px",gap:"24px"},f=e=>{const l=a.c(9),{targetCategory:i}=e,{token:c}=s.useToken();let n,d,m,p;return l[0]!==i?(n=r.map((e,a)=>t.jsx(k,{item:e,targetCategory:i},a)),l[0]=i,l[1]=n):n=l[1],l[2]!==n?(d=t.jsx("div",{style:y,children:n}),l[2]=n,l[3]=d):d=l[3],l[4]!==c.colorTextDisabled?(m=t.jsx(o,{className:"text-xs m-0 pt-6",style:{color:c.colorTextDisabled},children:"到达底部"}),l[4]=c.colorTextDisabled,l[5]=m):m=l[5],l[6]!==d||l[7]!==m?(p=t.jsxs("div",{className:"max-w-[640px] m-auto",children:[d,m]}),l[6]=d,l[7]=m,l[8]=p):p=l[8],p};f.displayName="AddComponent";const v=e.memo(f),k=e.memo(a=>{const{item:o,targetCategory:r}=a,y=l(),{token:f}=s.useToken(),v=i("(prefers-color-scheme: dark)"),k=c(e=>e.wallpaperTheme.themeMode),j=e.useCallback(e=>"auto"===e?v?"hover:bg-white hover:bg-opacity-15":"hover:bg-black hover:bg-opacity-10":"light"===e?"hover:bg-black hover:bg-opacity-10":"hover:bg-white hover:bg-opacity-15",[v]);return t.jsxs("div",{className:`flex flex-col rounded-md p-3 cursor-pointer ${j(k)} transition-main`,style:{backgroundColor:f.colorBgContainerDisabled},onClick:()=>{d.info("请点击右下角进行添加")},children:[t.jsx("div",{className:"flex-1 flex-center",children:t.jsx("img",{src:o.imgPreview,className:"h-full max-h-[72px] rounded-2xl i-shadow",alt:o.label,loading:"lazy",onError:e=>{e.currentTarget.src="/icons/default_image.svg"}})}),t.jsxs("div",{className:"flex items-center h-[20px]",children:[t.jsx("span",{className:"flex-1 font-semibold line-clamp-1",children:o.label}),t.jsx(n,{onClick:e=>{e.stopPropagation(),e.preventDefault(),(e=>{try{const a=m.getState().card.defaultCardSize,s={id:p(),type:e.type,label:e.label,size:("newAddCard"===e.type||"bookmark"===e.type||"history"===e.type||"settings"===e.type)&&a||e.size},t=m.getState().home.showFreeDrag,o=m.getState().swiper.showSwiper;if(t&&!o){const a=m.getState().appData.freeDragListData,t=x(a).concat(s);y(g(t)),d.success(`【${e.label}】已添加至自由拖拽区域`)}else{const a=m.getState().appData.listData,t=h(x(a),r,s);y(b(t)),d.success(`【${e.label}】添加完成`)}}catch(a){console.error("添加组件时出错:",a),d.error("添加组件时出错，请稍后再试")}})(o)},type:"link",className:"flex-0",icon:t.jsx(u,{className:"text-2xl"})})]})]})});export{v as default};
